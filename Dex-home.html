<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dex&trade; Home</title>
    <meta
      name="description"
      content="Dex™ — Digital Education Exchange. A student marketplace to buy, sell, and exchange campus essentials."
    />

    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <!-- Fonts (Fredoka One for headings, Quicksand for body) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* =========================
   PRELOADER
========================= */
      #preloader {
        position: fixed;
        inset: 0;
        z-index: 4000;
        display: flex;
        align-items: center;
        justify-content: center;
        background: url("DEX_HOMEPAGES/images/welcome_dex.jpg") center/cover
          no-repeat;
        overflow: hidden;
      }

      #preloader .pl-image {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        will-change: opacity, transform;
        opacity: 0;
        transition: opacity 0.6s ease, transform 0.7s ease;
      }

      #preloader .pl-image.first {
        opacity: 1;
      }

      #preloader .pl-image.second {
        transform: translateX(-100%);
      }

      #preloader .pl-image.slide-in {
        transform: translateX(0);
        opacity: 1;
      }

      #preloader.fade-away {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.6s ease;
      }

      #preloader .loader-ui {
        position: relative;
        z-index: 10;
        text-align: center;
        color: #fff;
        font-family: "Fredoka One", cursive;
        font-size: 20px;
        letter-spacing: 0.4px;
      }

      #preloader .spinner {
        width: 44px;
        height: 44px;
        border: 4px solid #008000;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.9s linear infinite;
        margin: 8px auto 0;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* =========================
             THEME VARIABLES
             ========================= */
      :root {
        --brand-green: #008000;
        --brand-green-soft: #70bb70;
        --white: #ffffff;
        --muted: #666666;
      }

      /* =========================
             BASE TYPOGRAPHY + ACCESSIBILITY
             ========================= */
      html {
        scroll-behavior: smooth;
        font-size: 16px;
      }
      body {
        margin: 0;
        font-family: "Quicksand", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        color: #222;
        background: var(--white);
      }

      /* Make main headings use Fredoka One (consistent across all screens) */
      h1,
      .hero-section h2 {
        font-family: "Fredoka One", cursive;
        margin: 0;
      }
      h2 {
        font-size: clamp(28px, 5.4vw, 56px);
        line-height: 1.02;
      }
      h3 {
        font-size: clamp(16px, 2.2vw, 20px);
      }

      p,
      li,
      a,
      button,
      input {
        font-size: clamp(13px, 1.6vw, 16px);
      }

      .fade-in {
        opacity: 0;
        transform: translateY(14px);
        transition: opacity 0.7s ease, transform 0.7s ease;
        will-change: opacity, transform;
      }
      .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* =========================
             HEADER
             ========================= */
      .header-bar {
        background: rgba(0, 128, 0, 0.6);
        backdrop-filter: blur(4px);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        z-index: 1100;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 28px;
        gap: 12px;
        box-sizing: border-box;
        transition: background 0.22s ease, box-shadow 0.22s ease,
          padding 0.22s ease;
      }
      .header-bar.scrolled {
        background: rgba(0, 128, 0, 0.86);
        box-shadow: 0 8px 28px rgba(0, 0, 0, 0.12);
        padding: 8px 20px;
      }

      #company-wrap {
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 0;
      }
      h1#company-name a {
        font-family: "Fredoka One", cursive;
        font-size: clamp(1.1rem, 2.6vw, 1.6rem);
        color: #fff;
        text-decoration: none;
        white-space: nowrap;
      }

      #menuToggle {
        display: none;
        background: transparent;
        border: 0;
        color: #fff;
        font-size: 1.125rem;
        cursor: pointer;
      }

      nav {
        display: flex;
        align-items: center;
      }
      nav ul {
        display: flex;
        gap: 18px;
        margin: 0;
        padding: 0;
        list-style: none;
        align-items: center;
      }
      nav a {
        color: #fff;
        text-decoration: none;
        padding: 8px 10px;
        border-radius: 8px;
        font-weight: 500;
        transition: transform 0.18s ease, background 0.18s ease;
        display: inline-block;
      }
      nav a:hover,
      nav a.active {
        background: var(--brand-green-soft);
        transform: translateY(-2px);
        box-shadow: 0 8px 22px rgba(0, 0, 0, 0.12);
      }

      .header-utils {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .header-utils a {
        color: #fff;
        text-decoration: none;
        padding: 6px 10px;
        border-radius: 7px;
        transition: background 0.18s ease;
      }
      .header-utils a:hover {
        background: var(--brand-green-soft);
      }

      .search-bar {
        border-radius: 10px;
        background: #1d991d;
        padding: 6px 10px;
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 220px;
        max-width: 360px;
        box-sizing: border-box;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transition: box-shadow 0.25s ease, transform 0.18s ease;
      }

      .search-bar:hover {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.16);
        transform: translateY(-2px);
      }
      .search-bar input:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(112, 187, 112, 0.4);
        border-radius: 8px;
      }

      .search-bar input {
        border: 0;
        outline: 0;
        background: transparent;
        color: #fff;
        flex: 1;
        font-size: 0.95rem;
      }
      .search-bar input::placeholder {
        color: #e7e7e7;
      }
      .search-bar button {
        background: transparent;
        border: 0;
        color: #fff;
        cursor: pointer;
        font-size: 16px;
      }

      #toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #1a73e8;
        color: #fff;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: 1000;
      }
      #toast.show {
        opacity: 1;
        pointer-events: auto;
      }

      .profile-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
      }

      .profile-avatar {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #fff;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .profile-avatar:hover {
        transform: scale(1.05);
        box-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
      }

      .notification-icon {
        position: relative;
        color: #fff;
        font-size: 1.2rem;
        cursor: pointer;
      }

      .notification-badge {
        position: absolute;
        top: -4px;
        right: -6px;
        background: red;
        color: #fff;
        border-radius: 50%;
        font-size: 0.65rem;
        padding: 2px 5px;
        min-width: 16px;
        text-align: center;
        font-weight: 600;
      }

      .sign-in-link {
        color: #fff;
        background: var(--brand-green);
        padding: 6px 12px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        transition: background 0.2s ease;
      }

      .sign-in-link:hover {
        background: var(--brand-green-soft);
      }

      /* =========================
             HERO (KEEP BACKGROUND EXACT)
             ========================= */
      .hero-section {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: calc(100vh - 72px);
        padding: 40px 20px;
        background: linear-gradient(rgba(2, 82, 2, 0.6), rgba(0, 0, 0, 0.6)),
          url("DEX_HOMEPAGES/images/welcom.jpg") center/cover no-repeat;
        color: #fff;
        text-align: center;
        box-sizing: border-box;
      }
      .hero-section .hero {
        max-width: 1000px;
      }
      .hero-section h2 {
        margin-bottom: 12px;
        letter-spacing: -0.4px;
      }
      .hero-section p {
        margin: 10px 0 18px;
        color: #f0f0f0;
      }
      .hero-section a {
        display: inline-block;
        background: var(--brand-green);
        color: #fff;
        padding: 11px 18px;
        border-radius: 8px;
        text-decoration: none;
        margin: 6px 8px 0 8px;
        transition: transform 0.18s ease, box-shadow 0.18s ease;
      }
      .hero-section a:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        background: #419141;
      }

      /* Ensure hero text doesn't get cut on tiny screens */
      @media (max-width: 420px) {
        .hero-section {
          padding: 36px 12px;
        }
        .hero-section p {
          font-size: 0.92rem;
        }
      }

      /* =========================
             CATEGORIES
             ========================= */
      .categories-section {
        padding: 56px 18px;
        text-align: center;
        background: #f8f8f8;
      }
      .categories-section h2 {
        font-size: clamp(1.05rem, 2.2vw, 1.6rem);
        margin-bottom: 22px;
        color: var(--brand-green);
      }
      .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 16px;
        max-width: 1100px;
        margin: 0 auto;
      }
      .category-card {
        position: relative;
        height: 152px;
        border-radius: 12px;
        overflow: hidden;
        background: #ddd;
        box-shadow: 0 8px 26px rgba(0, 0, 0, 0.04);
        transition: transform 0.28s ease, box-shadow 0.28s ease;
      }
      .category-card img,
      .product-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.45s ease;
      }

      .category-card:hover img,
      .product-card:hover img {
        transform: scale(1.05);
      }

      .category-card h3 {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.45);
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 0.95rem;
        color: #fff;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        transition: color 0.25s ease;
      }

      .category-card h3:hover {
        background-color: rgba(71, 70, 70, 0.45);
      }

      .category-card a {
        text-decoration: none;
        color: #fff;
      }

      .category-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.08);
      }
      .category-card:hover img {
        transform: scale(1.05);
      }

      /* =========================
             PRODUCTS
             ========================= */
      .product-section {
        margin: 46px 18px;
        display: flex;
        flex-direction: column;
        gap: 18px;
        align-items: center;
      }
      .product-section h3 {
        width: 100%;
        max-width: 1100px;
        text-align: left;
        font-size: 1.05rem;
        color: var(--brand-green);
        font-weight: 700;
        margin: 0;
      }
      .products-grid {
        width: 100%;
        max-width: 1100px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 18px;
      }
      .product-card {
        background: #fff;
        border-radius: 10px;
        padding: 12px;
        box-shadow: 0 8px 28px rgba(0, 0, 0, 0.06);
        display: flex;
        flex-direction: column;
        gap: 10px;
        transition: transform 0.22s ease, box-shadow 0.22s ease;
      }

      .product-card:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 14px 40px rgba(0, 0, 0, 0.12);
      }

      .product-card img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 8px;
      }
      .product-card h4 {
        margin: 0;
        font-size: 1rem;
        color: #222;
      }
      .product-card p {
        margin: 0;
        color: var(--muted);
      }
      .product-actions {
        margin-top: auto;
        display: flex;
        gap: 8px;
      }
      .product-card button {
        background: var(--brand-green);
        color: #fff;
        border: 0;
        padding: 10px;
        border-radius: 8px;
        cursor: pointer;
        width: 100%;
      }
      .product-card button:hover {
        background: var(--brand-green-soft);
        transform: translateY(-3px);
      }
      .learn-more {
        display: inline-block;
        padding: 9px 12px;
        border-radius: 8px;
        background: #f0f0f0;
        color: var(--brand-green);
        text-decoration: none;
        font-weight: 500;
      }
      .learn-more:hover {
        background: var(--brand-green-soft);
        color: #fff;
        transform: translateY(-2px);
      }

      .empty-fallback {
        text-align: center;
        color: #777;
        margin: 20px 0;
      }

      /* =========================
             STORY
             ========================= */
      .story-section {
        max-width: 920px;
        margin: 42px auto;
        padding: 30px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 6px 28px rgba(0, 0, 0, 0.04);
        text-align: center;
      }
      .story-section h3 {
        font-size: 20px;
        margin-bottom: 12px;
        color: var(--brand-green);
      }
      .story-section p {
        font-size: 15px;
        color: #333;
        line-height: 1.7;
        margin: 0;
      }

      /* =========================
             FOOTER
             ========================= */
      footer {
        background: rgba(0, 128, 0, 0.75);
        backdrop-filter: blur(6px);
        color: #fff;
        padding: 18px 12px;
        border-top: 2px solid rgba(255, 255, 255, 0.18);
        box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.06);
      }
      .info-footer {
        max-width: 1100px;
        margin: 0 auto 12px;
        display: flex;
        gap: 18px;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        padding: 10px 6px;
      }

      footer a {
        text-decoration: none;
        color: rgb(115, 250, 115);
        font-size: 0.94rem;
      }

      footer a:hover {
        text-decoration: underline;
      }

      .quicklinks ul {
        list-style: none;
        padding: 0;
        margin: 6px 0;
      }
      .social-links a {
        color: #c8f5c8;
        margin-right: 8px;
        font-size: 18px;
      }

      .legalization {
        margin-left: 50%;
      }

      .legalization p {
        margin: 6px 0;
        color: #eaf7ea;
        font-size: 0.92rem;
      }

      /* =========================
             SCROLL-TO-TOP
             ========================= */
      #scrollTopBtn {
        position: fixed;
        right: 14px;
        bottom: 14px;
        width: 44px;
        height: 44px;
        display: grid;
        place-items: center;
        background: var(--brand-green);
        color: #fff;
        border-radius: 10px;
        border: 0;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        cursor: pointer;
        z-index: 1400;
        transform: translateY(8px);
        opacity: 0;
        transition: opacity 0.25s ease, transform 0.25s ease;
      }
      #scrollTopBtn.visible {
        opacity: 1;
        transform: none;
      }
      #scrollTopBtn:focus {
        outline: 2px solid rgba(255, 255, 255, 0.18);
      }

      /* =========================
             RESPONSIVE / MOBILE ADJUSTMENTS
             ========================= */
      /* Tablet-ish */
      @media (max-width: 1024px) {
        .categories-section {
          padding: 48px 16px;
        }
        .product-section {
          margin: 38px 14px;
        }
      }

      /* Smaller tablet / large phone */
      @media (max-width: 820px) {
        nav {
          display: none;
        } /* hide desktop nav on narrow screens; show via nav-open */
        #menuToggle {
          display: inline-flex;
        }
        .search-bar {
          min-width: 140px;
        }
      }

      /* Mobile */
      @media (max-width: 720px) {
        .header-bar {
          flex-wrap: wrap;
          padding: 10px 12px;
        }
        .header-bar.nav-open nav {
          display: flex;
          width: 100%;
          flex-direction: column;
          gap: 8px;
          padding: 12px;
          margin-top: 8px;
          background: rgba(0, 128, 0, 0.95);
          border-radius: 8px;
        }
        .header-bar.nav-open nav ul {
          flex-direction: column;
          gap: 6px;
        }
        .header-bar.nav-open .header-utils {
          display: flex;
          flex-direction: column;
          gap: 8px;
          padding: 12px;
          margin-top: 8px;
          background: rgba(0, 128, 0, 0.95);
          border-radius: 8px;
        }
        .hero-section {
          min-height: calc(85vh);
          padding: 36px 12px;
        }
        .hero-section h2 {
          font-size: clamp(20px, 6.6vw, 30px);
        }
        .categories-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 12px;
        }
        .category-card {
          height: 140px;
        }
        .products-grid {
          grid-template-columns: 1fr;
        }
        .product-card img {
          height: 200px;
        }
        .info-footer {
          flex-direction: column;
          align-items: center;
          gap: 12px;
          text-align: center;
        }
      }

      /* Very small phones & keypad-style screens */
      @media (max-width: 420px) {
        .hero-section h2 {
          font-size: clamp(18px, 8.4vw, 26px);
        }
        .category-card h3 {
          font-size: 14px;
          padding: 5px 8px;
        }
        .product-card button {
          padding: 10px;
        }
        .search-bar input {
          font-size: 13px;
        }
      }
      @media (max-width: 360px) {
        html {
          font-size: 15px;
        }
        .product-card img {
          height: 180px;
        }
        .search-bar {
          min-width: 120px;
          padding: 6px;
        }
      }
      @media (max-width: 320px) {
        html {
          font-size: 14px;
        }
        .category-card {
          height: 120px;
        }
        .product-card img {
          height: 160px;
        }
      }

      /* focus visible for keyboard users */
      :focus {
        outline: none;
      }
      .show-focus :focus {
        outline: 3px solid rgba(255, 255, 255, 0.18);
        border-radius: 6px;
      }

      @media (max-width: 420px) {
        .hero-section h2 {
          font-size: clamp(18px, 8.4vw, 26px);
        }
      }
    </style>
  </head>
  <body>
    <!-- PRELOADER -->
    <div id="preloader" role="status" aria-hidden="true">
      <!-- Layer 1: first image (visible) -->
      <div
        class="pl-image first"
        style="background-image: url('DEX_HOMEPAGES/images/hello.jpg')"
        aria-hidden="true"
      ></div>

      <!-- Layer 2: second image (starts left offscreen) -->
      <div
        class="pl-image second"
        style="background-image: url('DEX_HOMEPAGES/images/welcome_dex.jpg')"
        aria-hidden="true"
      ></div>

      <!-- UI on top (keeps your text/spinner visible) -->
      <div class="loader-ui" aria-hidden="true">
        <div class="spinner" aria-hidden="true"></div>
        <div class="loader-text">Dex&trade;</div>
      </div>
    </div>
    <header>
      <div class="header-bar" id="headerBar">
        <div id="company-wrap">
          <button
            id="menuToggle"
            aria-label="Toggle menu"
            aria-expanded="false"
          >
            <i class="fas fa-bars" aria-hidden="true"></i>
          </button>
          <h1 id="company-name">
            <a href="../DEX_HOMEPAGES/Dex-home.html">Dex&trade;</a>
          </h1>
        </div>

        <div class="search-bar" role="search" aria-label="Site search">
          <input
            type="text"
            id="siteSearch"
            placeholder="Search..."
            aria-label="Search products"
          />
          <button type="submit" id="searchBtn" aria-label="Search">
            <i class="fas fa-search"></i>
          </button>
        </div>

        <nav aria-label="Primary navigation">
          <ul>
            <li>
              <a href="../DEX_HOMEPAGES/Dex-home.html" class="active">Home</a>
            </li>
            <li><a href="../DEX_HOMEPAGES/Dex-services.html">Services</a></li>
            <li><a href="../DEX_HOMEPAGES/Dex-shop.html">Shop</a></li>
            <li><a href="../DEX_INFO/Dex-about.html">About</a></li>
            <li><a href="../DEX_CONTACT/Dex-contact.html">Contact</a></li>
          </ul>
        </nav>

        <div class="header-utils" id="header-utils" aria-live="polite"></div>
      </div>
    </header>

    <main>
      <div class="hero-section fade-in">
        <section class="hero">
          <h2>Welcome to Dex™</h2>
          <p>
            A campus essentials marketplace designed to improve student life.
          </p>
          <a href="DEX_HOMEPAGES/Dex-shop.html">Shop Now</a>
          <p>
            Dex&trade; is a free advertising platform that helps sellers
            showcase their goods and services to customers. Join today, and
            let's shop and sell together.
          </p>
          <a href="../DEX_HOMEPAGES/REGISTORY_PAGES/seller_register.html"
            >Join Dex™ as a Seller &dash; Post your products today!</a
          >
        </section>
      </div>

      <section class="categories-section fade-in">
        <h2>Shop by Category</h2>
        <div class="categories-grid" id="categories-grid">
          <div class="category-card">
            <img src="DEX_HOMEPAGES/images/fashion.jpg" alt="Fashion" />
            <h3><a href="fashion.html">Fashion</a></h3>
          </div>
          <div class="category-card">
            <img src="DEX_HOMEPAGES/images/home.jpg" alt="Home" />
            <h3><a href="home.html">Home & Living</a></h3>
          </div>
          <div class="category-card">
            <img src="DEX_HOMEPAGES/images/Laptops.jpg" alt="Laptops" />
            <h3><a href="laptops.html">Gadgets</a></h3>
          </div>
          <div class="category-card">
            <img src="DEX_HOMEPAGES/images/food.jpg" alt="Food" />
            <h3><a href="food.html">Food & Services</a></h3>
          </div>

          <div class="category-card">
            <img src="DEX_HOMEPAGES/images/books.jpg" alt="Books" />
            <h3><a href="books.html">Books & Stationery</a></h3>
          </div>

          <div class="category-card">
            <img src="DEX_HOMEPAGES/images/services.jpg" alt="Services" />
            <h3><a href="services.html">Campus Services</a></h3>
          </div>
        </div>
      </section>

      <section class="product-section fade-in" id="product-section">
        <h3>Sample Products</h3>
        <div class="products-grid" id="products-grid"></div>
        <div
          id="products-fallback"
          class="empty-fallback"
          aria-hidden="true"
          style="display: none"
        >
          No products yet. Please check back later!
        </div>
      </section>

      <section class="story-section fade-in">
        <h3>Our Story</h3>
        <p>
          Dex™ is a Digital Education Exchange built to empower students
          everywhere. It&apos;s more than just an online store — it&apos;s a
          campus-driven marketplace where students can buy, sell, and exchange
          educational essentials, gadgets, and lifestyle items in a trusted,
          student-first space. By connecting students through simplicity and
          innovation, Dex™ makes it easier to turn what you have into what you
          need — saving money, supporting peers, and building a smarter student
          economy.
        </p>
      </section>
    </main>

    <footer>
      <div class="info-footer">
        <div class="quicklinks">
          <h3>Quicklinks.</h3>
          <ul>
            <li><a href="../DEX_HOMEPAGES/Dex-home.html">Home</a></li>
            <li><a href="../DEX_INFO/Dex-about.html">About</a></li>
            <li><a href="../DEX_CONTACT/Dex-contact.html">Contact</a></li>
            <li><a href="../DEX_CONTACT/Dex-faq.html">FAQ</a></li>
          </ul>
        </div>

        <div class="social-links">
          <h3>Follow Us on Social Media</h3>
          <a
            href="https://facebook.com"
            target="_blank"
            rel="noopener noreferrer"
            ><i class="fab fa-facebook" aria-hidden="true"></i
          ></a>
          <a
            href="https://twitter.com"
            target="_blank"
            rel="noopener noreferrer"
            ><i class="fab fa-twitter" aria-hidden="true"></i
          ></a>
          <a
            href="https://instagram.com"
            target="_blank"
            rel="noopener noreferrer"
            ><i class="fab fa-instagram" aria-hidden="true"></i
          ></a>
          <a
            href="https://linkedin.com"
            target="_blank"
            rel="noopener noreferrer"
            ><i class="fab fa-linkedin" aria-hidden="true"></i
          ></a>
        </div>

        <div>
          <h3>Contact Us</h3>
          <p>
            For inquiries and questions, reach us at
            <a href="mailto:Dex@gmail.com">Dex@gmail.com</a> or call us at
            <a href="tel:0502946803">0502946803</a>.
          </p>
        </div>
      </div>

      <div class="legalization">
        <p>&copy; 2025 Dex&trade;. All rights reserved.</p>
        <p>
          <a href="../DEX_LEGALPAGES/privacy.html">Privacy Policy</a> |
          <a href="../DEX_LEGALPAGES/terms.html">Terms of Service</a>
        </p>
      </div>
    </footer>

    <!-- Scroll-to-top button -->
    <button id="scrollTopBtn" aria-label="Scroll to top" title="Back to top">
      <i class="fas fa-chevron-up" aria-hidden="true"></i>
    </button>

    <script>
      /* =========================
   PRODUCTS DATA
========================= */
      const products = [
        {
          name: "Product 1",
          price: 500,
          img: "DEX_HOMEPAGES/sample_products/T-shirt/md-salman-tWOz2_EK5EQ-unsplash.jpg",
        },
        {
          name: "Product 2",
          price: 4000,
          img: "DEX_HOMEPAGES/sample_products/Phones/vojtech-bruzek-J82GxqnwKSs-unsplash.jpg",
        },
        {
          name: "Product 3",
          price: 150,
          img: "DEX_HOMEPAGES/sample_products/Phones/oscar-nord-8l9VxXI28tY-unsplash.jpg",
        },
        {
          name: "Product 4",
          price: 2000,
          img: "DEX_HOMEPAGES/sample_products/T-shirt/benjamin-r-iNvK2Xmpx8o-unsplash.jpg",
        },
        {
          name: "Product 5",
          price: 5900,
          img: "DEX_HOMEPAGES/sample_products/Headsets/robert-torres-oGK9QxOwMAU-unsplash.jpg",
        },
        {
          name: "Product 6",
          price: 4000,
          img: "DEX_HOMEPAGES/sample_products/Headsets/robert-torres-oDrBOovU5A8-unsplash.jpg",
        },
        {
          name: "Product 7",
          price: 2000,
          img: "DEX_HOMEPAGES/sample_products/Laptops/olena-bohovyk-1S_c_O_glv4-unsplash.jpg",
        },
        {
          name: "Product 8",
          price: 800,
          img: "DEX_HOMEPAGES/sample_products/Laptops/dell-Gi3iUJ1FwxI-unsplash.jpg",
        },
        {
          name: "Product 9",
          price: 1000,
          img: "DEX_HOMEPAGES/sample_products/T-shirt/robert-richman-vcTKFYNZop4-unsplash.jpg",
        },
      ];

      /* =========================
   UTILS
========================= */
      function shuffleArray(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function showToast(message, duration = 2000) {
        let toast = document.getElementById("toast");
        if (!toast) {
          toast = document.createElement("div");
          toast.id = "toast";
          Object.assign(toast.style, {
            position: "fixed",
            bottom: "20px",
            right: "20px",
            padding: "12px 20px",
            backgroundColor: "rgba(0,0,0,0.85)",
            color: "#fff",
            borderRadius: "8px",
            fontWeight: "500",
            opacity: "0",
            transition: "opacity 0.5s ease",
            zIndex: "9999",
          });
          document.body.appendChild(toast);
        }
        toast.textContent = message;
        toast.style.opacity = "1";
        setTimeout(() => (toast.style.opacity = "0"), duration);
      }

      /* =========================
   CART SYSTEM
========================= */
      function updateCartBadge() {
        const cartIcon = document.querySelector(
          ".header-utils a[href*='DEX_HOMEPAGES/cart.html']"
        );
        if (!cartIcon) return;
        let badge = cartIcon.querySelector(".cart-badge");
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        if (cart.length === 0) return badge && badge.remove();

        if (!badge) {
          badge = document.createElement("span");
          badge.className = "cart-badge";
          badge.setAttribute("aria-live", "polite");
          badge.style.cssText = `
      position: absolute; top: -6px; right: -6px; background: red;
      color: white; font-size: 0.7rem; font-weight: bold;
      padding: 2px 6px; border-radius: 50%;
    `;
          cartIcon.style.position = "relative";
          cartIcon.appendChild(badge);
        }
        badge.textContent = cart.length;
      }

      function addToCart(name, price, image) {
        const currentUser =
          JSON.parse(localStorage.getItem("currentUser")) ||
          JSON.parse(sessionStorage.getItem("currentUser"));
        if (!currentUser)
          return alert("Please log in to add items to your cart.");
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.push({ name, price, image });
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartBadge();
        showToast(`${name} added to cart`);
      }

      /* =========================
   ADD-TO-CART BUTTONS
========================= */
      function updateAddToCartButtons() {
        const currentUser =
          JSON.parse(localStorage.getItem("currentUser")) ||
          JSON.parse(sessionStorage.getItem("currentUser"));
        document.querySelectorAll(".product-card button").forEach((btn) => {
          if (!currentUser) {
            btn.disabled = true;
            btn.style.background = "#aaa";
            btn.style.cursor = "not-allowed";
            btn.title = "Log in to add items to cart";
          } else {
            btn.disabled = false;
            btn.style.background = "var(--brand-green)";
            btn.style.cursor = "pointer";
            btn.title = "";
          }
        });
      }

      /* =========================
   PRODUCT RENDERING
========================= */
      function renderProducts(productsArray = products) {
        const grid = document.getElementById("products-grid");
        const fallback = document.getElementById("products-fallback");
        grid.innerHTML = "";
        if (!productsArray || productsArray.length === 0)
          return (fallback.style.display = "block");
        fallback.style.display = "none";
        shuffleArray(productsArray).forEach((p) => {
          const card = document.createElement("div");
          card.className = "product-card fade-in";
          card.innerHTML = `
      <img src="${p.img}" alt="${p.name}" loading="lazy" />
      <h4>${p.name}</h4>
      <p>&#8373; ${p.price}</p>
      <div class="product-actions">
        <button aria-label="Add ${p.name} to cart">Add to Cart</button>
        <a class="learn-more" href="product-details.html">Learn more</a>
      </div>`;
          card
            .querySelector("button")
            .addEventListener("click", () => addToCart(p.name, p.price, p.img));
          grid.appendChild(card);
        });
        updateAddToCartButtons();
        observeFadeIns();
      }

      function setupSearch() {
        const searchInput = document.getElementById("siteSearch");
        searchInput?.addEventListener("input", () => {
          const q = searchInput.value.toLowerCase();
          const filtered = products.filter(
            (p) =>
              p.name.toLowerCase().includes(q) ||
              (p.category && p.category.toLowerCase().includes(q)) ||
              p.price.toString().includes(q)
          );
          renderProducts(filtered);
        });
      }

      /* =========================
   HEADER LINKS + USER UI
========================= */
      const headerUtils = document.getElementById("header-utils");

      function createLink(href, text, iconClass) {
        const a = document.createElement("a");
        a.href = href;
        if (iconClass) {
          const i = document.createElement("i");
          i.className = iconClass;
          i.style.marginRight = "6px";
          a.appendChild(i);
        }
        a.appendChild(document.createTextNode(text));
        return a;
      }

      function handleLogout(e) {
        e?.preventDefault();
        if (!confirm("Logout?")) return;
        localStorage.removeItem("currentUser");
        sessionStorage.removeItem("currentUser");
        window.location.href = "DEX_HOMEPAGES/REGISTORY_PAGES/Sign_in.html";
      }

      function loadUserUI(currentUser) {
        headerUtils.innerHTML = "";

        if (!currentUser) {
          headerUtils.appendChild(
            createLink("DEX_HOMEPAGES/REGISTORY_PAGES/Sign_in.html", "Sign in")
          );
          headerUtils.appendChild(
            createLink(
              "DEX_HOMEPAGES/cart.html",
              "Cart",
              "fas fa-shopping-cart"
            )
          );
          return;
        }

        const profileContainer = document.createElement("div");
        profileContainer.style.display = "flex";
        profileContainer.style.alignItems = "center";
        profileContainer.style.gap = "10px";

        const img = document.createElement("img");
        img.src = currentUser.profilePic || "../assets/default-avatar.png";
        img.alt = "Profile";
        Object.assign(img.style, {
          width: "35px",
          height: "35px",
          borderRadius: "50%",
          objectFit: "cover",
          border: "2px solid var(--brand-green)",
          cursor: "pointer",
        });

        img.addEventListener("click", () => {
          if (currentUser.role === "buyer")
            window.location.href =
              "DEX_HOMEPAGES/REGISTORY_PAGES/Buyer_profile.html";
          else if (currentUser.role === "seller")
            window.location.href =
              "DEX_HOMEPAGES/REGISTORY_PAGES/Sellers_page.html";
          else
            window.location.href = "DEX_HOMEPAGES/REGISTORY_PAGES/Sign_in.html";
        });

        profileContainer.appendChild(img);
        headerUtils.appendChild(profileContainer);

        const notifIcon = document.createElement("i");
        notifIcon.className = "fas fa-bell";
        notifIcon.style.cursor = "pointer";
        notifIcon.style.position = "relative";
        notifIcon.title = "Notifications";
        const roleKey = `${currentUser.role}Notifications`;
        const notifications = JSON.parse(localStorage.getItem(roleKey)) || [];
        if (notifications.length > 0) {
          const badge = document.createElement("span");
          badge.textContent = notifications.length;
          Object.assign(badge.style, {
            position: "absolute",
            top: "-5px",
            right: "-5px",
            background: "red",
            color: "#fff",
            fontSize: "0.7rem",
            fontWeight: "bold",
            padding: "2px 6px",
            borderRadius: "50%",
          });
          notifIcon.appendChild(badge);
        }

        notifIcon.addEventListener("click", () => {
          if (notifications.length === 0)
            return showToast("No new notifications");
          const msg = notifications
            .map((n) => `• ${n.message || "Notification"}`)
            .join("\n");
          alert(`Your Notifications:\n\n${msg}`);
          localStorage.setItem(roleKey, JSON.stringify([]));
          notifIcon.querySelector("span")?.remove();
        });

        headerUtils.appendChild(notifIcon);
        headerUtils.appendChild(
          createLink("cart.html", "Cart", "fas fa-shopping-cart")
        );
        const logout = createLink("#", "Logout");
        logout.addEventListener("click", handleLogout);
        headerUtils.appendChild(logout);
      }

      function loadHeaderLinks() {
        const currentUser =
          JSON.parse(localStorage.getItem("currentUser")) ||
          JSON.parse(sessionStorage.getItem("currentUser"));
        loadUserUI(currentUser);
      }

      /* =========================
   FADE-IN + SCROLL
========================= */
      function observeFadeIns() {
        const faders = document.querySelectorAll(".fade-in");
        const obs = new IntersectionObserver(
          (entries, ob) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("visible");
                ob.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.18 }
        );
        faders.forEach((el) => obs.observe(el));
      }

      const headerBar = document.getElementById("headerBar");
      const scrollBtn = document.getElementById("scrollTopBtn");

      window.addEventListener("scroll", () => {
        headerBar?.classList.toggle("scrolled", window.scrollY > 60);
        scrollBtn?.classList.toggle("visible", window.scrollY > 300);
      });
      scrollBtn?.addEventListener("click", () =>
        window.scrollTo({ top: 0, behavior: "smooth" })
      );

      /* =========================
   PRELOADER
========================= */
      window.addEventListener("load", () => {
        const preloader = document.getElementById("preloader");
        if (!preloader) return;
        const firstImg = preloader.querySelector(".pl-image.first");
        const secondImg = preloader.querySelector(".pl-image.second");
        setTimeout(() => {
          firstImg?.classList.add("fade-out");
          secondImg?.classList.add("slide-in");
          setTimeout(() => {
            secondImg?.classList.add("fade-out");
            preloader.classList.add("fade-away");
            setTimeout(() => preloader.remove(), 600);
          }, 2000);
        }, 2000);
      });

      /* =========================
   MOBILE NAV
========================= */
      const menuToggle = document.getElementById("menuToggle");
      menuToggle?.addEventListener("click", () => {
        const expanded = menuToggle.getAttribute("aria-expanded") === "true";
        menuToggle.setAttribute("aria-expanded", (!expanded).toString());
        headerBar?.classList.toggle("nav-open");
        if (!expanded) headerBar?.querySelector("nav a")?.focus();
      });

      document.addEventListener("click", (e) => {
        if (!headerBar?.classList.contains("nav-open")) return;
        if (!headerBar.contains(e.target)) {
          headerBar.classList.remove("nav-open");
          menuToggle?.setAttribute("aria-expanded", "false");
        }
      });
      document.querySelectorAll("nav a").forEach((a) =>
        a.addEventListener("click", () => {
          if (headerBar?.classList.contains("nav-open")) {
            headerBar.classList.remove("nav-open");
            menuToggle?.setAttribute("aria-expanded", "false");
          }
        })
      );

      /* =========================
   SIGN-IN FORM
========================= */
      const loginForm = document.getElementById("customerLoginForm");
      loginForm?.addEventListener("submit", (e) => {
        e.preventDefault();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();
        const users = JSON.parse(localStorage.getItem("users")) || [];
        const user = users.find(
          (u) => u.email === email && u.password === password
        );
        if (user) {
          if (document.getElementById("remember").checked)
            localStorage.setItem("currentUser", JSON.stringify(user));
          else sessionStorage.setItem("currentUser", JSON.stringify(user));
          alert(`Welcome back, ${user.fullName || "User"}!`);
          loadHeaderLinks();
          setTimeout(() => (window.location.href = "../../Dex-home.html"), 150);
        } else {
          alert("Invalid email or password.");
          loginForm.reset();
        }
      });

      /* =========================
   INITIALIZATION
========================= */
      window.addEventListener("DOMContentLoaded", () => {
        loadHeaderLinks();
        renderProducts();
        setupSearch();
        updateCartBadge();
        document.body.addEventListener(
          "keydown",
          (e) =>
            e.key === "Tab" &&
            document.documentElement.classList.add("show-focus"),
          { once: true }
        );
      });
    </script>
  </body>
</html>
