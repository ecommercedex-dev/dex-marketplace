<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dex™ Home</title>
    <meta
      name="description"
      content="Dex™ — Digital Education Exchange. A student marketplace to buy, sell, and exchange campus essentials."
    />

    <!-- Fonts (keep the fonts you used) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Preload main fonts -->
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@300;400;500;700&display=swap"
      as="style"
    />
    <!-- Preload hero image -->
    <link rel="preload" as="image" href="DEX_HOMEPAGES/images/welcome.webp" />
    <link
      rel="preload"
      as="image"
      href="DEX_HOMEPAGES/images/pexels-fernando-cortes-222333079-30747177.webp"
    />
    <link
      rel="preload"
      as="image"
      href="DEX_HOMEPAGES/images/bg-hostels.webp"
    />

    <link rel="icon" type="image/x-icon" href="DEX_FAVICON/favicon.png" />

    <style>
      /* ========= THEME ========== */
      :root {
        --brand-green: #008000;
        --brand-green-soft: #70bb70;
        --white: #fff;
        --muted: #666;
        --glass: rgba(255, 255, 255, 0.04);
      }
      html {
        font-size: 16px;
        box-sizing: border-box;
      }
      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }
      body {
        margin: 0;
        font-family: "Quicksand", sans-serif;
        color: #111;
        background: var(--white);
        -webkit-font-smoothing: antialiased;
      }

      body.loading {
        overflow: hidden;
      }

      /* ===== PRELOADER (improved) ===== */
      #preloader {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--brand-green);
        overflow: hidden;
        flex-direction: column;
        gap: 18px;
        padding: 18px;
      }
      .preloader-frame {
        position: relative;
        width: 100%;
        max-width: 1100px;
        height: 60vh;
        max-height: 560px;
        border-radius: 14px;
        overflow: hidden;
        box-shadow: 0 18px 60px rgba(0, 0, 0, 0.28);
        background: #072307;
      }
      .pl-image {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        transform: translateX(8%);
        opacity: 0;
        transition: transform 0.9s cubic-bezier(0.22, 0.9, 0.14, 1),
          opacity 0.9s ease;
      }
      .pl-image.show {
        transform: none;
        opacity: 1;
      }
      .pl-gradient {
        position: absolute;
        inset: 0;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0.18),
          rgba(0, 0, 0, 0.45)
        );
        pointer-events: none;
      }
      .preloader-ui {
        position: relative;
        z-index: 30;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        color: var(--white);
        font-family: "Fredoka One", cursive;
      }
      .preloader-logo {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .preloader-logo .mark {
        width: 46px;
        height: 46px;
        border-radius: 10px;
        background: var(--white);
        display: grid;
        place-items: center;
        color: var(--brand-green);
        font-weight: 700;
      }
      .preloader-text {
        font-size: 20px;
      }
      .preloader-spinner {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        border: 4px solid rgba(255, 255, 255, 0.12);
        border-top-color: var(--brand-green);
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* ===== HEADER ===== */
      .header-bar {
        position: fixed;
        top: 12px;
        left: 12px;
        right: 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 18px;
        border-radius: 12px;
        background: linear-gradient(
          90deg,
          rgba(0, 128, 0, 0.14),
          rgba(0, 128, 0, 0.06)
        );
        backdrop-filter: blur(6px);
        z-index: 900;
      }
      #company-name a {
        font-family: "Fredoka One", cursive;
        color: var(--white);
        text-decoration: none;
        font-size: 2.15rem;
      }
      nav {
        display: flex;
        align-items: center;
        gap: 18px;
      }
      nav a {
        color: var(--white);
        text-decoration: none;
        padding: 8px 10px;
        border-radius: 8px;
        font-weight: 600;
      }
      nav a.active,
      nav a:hover {
        background: var(--brand-green-soft);
        transform: translateY(-2px);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
      }
      nav.open {
        display: flex !important;
      }

      .header-utils {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .header-utils a {
        color: var(--white);
        text-decoration: none;
        padding: 8px 10px;
        border-radius: 8px;
        font-weight: 600;
      }
      .header-utils a.active,
      .header-utils a:hover {
        background: var(--brand-green-soft);
        transform: translateY(-2px);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
      }

      .search-bar {
        background: rgba(0, 0, 0, 0.12);
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 10px;
        min-width: 220px;
      }
      .search-bar input {
        background: transparent;
        border: 0;
        color: var(--white);
        outline: none;
      }

      /* Overlay */
      .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.78);
        backdrop-filter: blur(10px);
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.45s, visibility 0.45s;
        z-index: 998;
      }

      .overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Notification Sidebar */
      #notificationSidebar {
        position: fixed;
        top: 0;
        right: -440px;
        width: 440px;
        max-width: 92vw;
        height: 100dvh;
        background: linear-gradient(
          135deg,
          rgba(18, 18, 25, 0.98),
          rgba(10, 10, 18, 0.95)
        );
        backdrop-filter: blur(28px);
        -webkit-backdrop-filter: blur(28px);
        padding: 28px;
        z-index: 9999;
        overflow-y: auto;
        transition: right 0.58s cubic-bezier(0.22, 1, 0.36, 1);
        border-left: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: -20px 0 60px rgba(0, 0, 0, 0.6);
        font-family: inherit;
      }

      #notificationSidebar.open {
        right: 0;
        animation: premiumSlideIn 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      }

      @keyframes premiumSlideIn {
        from {
          transform: translateX(120px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .notif-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1.4rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.14);
        animation: fadeInDown 0.7s ease-out;
      }

      .notif-header h3 {
        color: var(--brand-green-soft);
        font-size: 1.62rem;
        font-weight: 700;
        letter-spacing: -0.5px;
        background: linear-gradient(90deg, var(--brand-green-soft), #fff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      #clearAllBtn {
        background: rgba(255, 255, 255, 0.14);
        border: none;
        color: #ddd;
        cursor: pointer;
        font-size: 0.94rem;
        font-weight: 600;
        padding: 9px 18px;
        border-radius: 12px;
        transition: 0.35s;
        backdrop-filter: blur(10px);
      }

      #clearAllBtn:hover {
        background: rgba(255, 255, 255, 0.26);
        color: #fff;
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
      }

      .notif-item {
        position: relative;
        background: rgba(255, 255, 255, 0.095);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        border-radius: 18px;
        padding: 20px;
        margin-bottom: 18px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        cursor: pointer;
        transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.22);
        opacity: 0;
        transform: translateY(25px);
      }

      .notif-item.visible {
        opacity: 1;
        transform: translateY(0);
        animation: cardPopIn 0.58s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }

      @keyframes cardPopIn {
        0% {
          transform: scale(0.9) translateY(30px);
          opacity: 0;
        }
        100% {
          transform: scale(1) translateY(0);
          opacity: 1;
        }
      }

      .notif-item:hover {
        background: rgba(255, 255, 255, 0.17);
        transform: translateY(-8px) scale(1.015);
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4),
          0 0 0 1px rgba(110, 207, 69, 0.25) inset;
      }

      .notif-item.unread {
        background: linear-gradient(
          135deg,
          rgba(110, 207, 69, 0.2),
          rgba(110, 207, 69, 0.09)
        );
        border-left: 5px solid var(--brand-green-soft);
      }

      .notif-item.unread::after {
        content: "";
        position: absolute;
        top: 20px;
        right: 20px;
        width: 12px;
        height: 12px;
        background: var(--brand-green-soft);
        border-radius: 50%;
        box-shadow: 0 0 18px rgba(110, 207, 69, 0.8);
        animation: unreadGlow 2s ease-in-out infinite;
      }

      @keyframes unreadGlow {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.35);
          opacity: 0.65;
        }
      }

      .notif-inner {
        display: flex;
        gap: 16px;
        align-items: flex-start;
      }

      .notif-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        flex-shrink: 0;
        background: rgba(255, 255, 255, 0.14);
        backdrop-filter: blur(10px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.25);
      }

      .notif-icon.order {
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
      }
      .notif-icon.message {
        background: linear-gradient(135deg, #4ecdc4, #44a08d);
      }
      .notif-icon.review {
        background: linear-gradient(135deg, #feca57, #ff9ff3);
      }
      .notif-icon.system {
        background: linear-gradient(135deg, #a55eea, #6c5ce7);
      }
      .notif-icon.error {
        background: linear-gradient(135deg, #e74c3c, #c0392b);
      }

      .notif-content {
        flex: 1;
        min-width: 0;
      }

      .notif-content h4 {
        margin: 0 0 7px;
        font-size: 1.12rem;
        font-weight: 600;
        color: #fff;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .notif-content p {
        margin: 0 0 9px;
        font-size: 0.94rem;
        color: rgba(255, 255, 255, 0.88);
        line-height: 1.48;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .notif-time {
        font-size: 0.8rem;
        color: #bbb;
        font-weight: 500;
        opacity: 0.9;
      }

      #notifEmptyState {
        text-align: center;
        padding: 4.5rem 1.5rem;
        color: #999;
        animation: fadeIn 0.9s ease-out;
      }

      #notifEmptyState i {
        font-size: 3.6rem;
        opacity: 0.35;
        margin-bottom: 1.2rem;
        display: block;
        animation: float 3.5s ease-in-out infinite;
      }

      #notifEmptyState p {
        font-size: 1.15rem;
        margin: 10px 0;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-12px);
        }
      }

      #notificationBtn {
        position: relative;
        cursor: pointer;
        padding: 10px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(8px);
        transition: 0.35s;
      }

      #notificationBtn:hover {
        background: rgba(255, 255, 255, 0.18);
        transform: scale(1.1);
      }

      #notificationBtn i {
        font-size: 1.75rem;
        color: #fff;
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      #notificationBtn:hover i {
        transform: scale(1.4) rotate(22deg);
      }

      #notificationBadge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: #e74c3c;
        color: #fff;
        font-size: 0.68rem;
        font-weight: 700;
        min-width: 22px;
        height: 22px;
        border-radius: 50%;
        border: 2.5px solid #000;
        display: grid;
        place-items: center;
        box-shadow: 0 4px 12px rgba(231, 76, 60, 0.5);
        animation: premiumPulse 2.2s ease-in-out infinite;
      }

      @keyframes premiumPulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.28);
          opacity: 0.88;
        }
      }

      /* ===== ANIMATIONS ===== */
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @media (max-width: 768px) {
        #notificationSidebar {
          width: 80%;
          max-width: 100vw;
          right: -100%;
          padding: 20px;
        }
      }

      @media (max-width: 480px) {
        #notificationSidebar {
          width: 90vw;
        }

        .notif-item {
          padding: 16px;
          margin-bottom: 14px;
        }

        .notif-icon {
          width: 42px;
          height: 42px;
          font-size: 1.3rem;
        }

        .notif-content h4 {
          font-size: 1rem;
        }

        .notif-content p {
          font-size: 0.85rem;
        }
      }

      /* ===== HERO ===== */
      .hero {
        min-height: calc(100vh - 120px);
        display: grid;
        place-items: center;
        padding: 80px 20px;
        background: linear-gradient(
            180deg,
            rgba(2, 82, 2, 0.6),
            rgba(0, 0, 0, 0.45)
          ),
          url("DEX_HOMEPAGES/images/welcome.webp") center/cover no-repeat;
        color: var(--white);
        text-align: center;
        transition: opacity 0.5s ease-in-out;
      }
      .hero .inner {
        max-width: 980px;
        padding: 28px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          transparent
        );
        border-radius: 14px;
      }
      .hero h2 {
        font-family: "Fredoka One", cursive;
        font-size: clamp(28px, 5.4vw, 56px);
        margin: 0;
        animation: fadeInUp 0.8s ease-out;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .hero h2,
      .hero p {
        transition: opacity 0.5s ease;
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .hero p {
        animation: fadeInUp 0.8s ease-out 0.2s both;
      }

      .hero .actions {
        animation: fadeInUp 0.8s ease-out 0.4s both;
      }
      .hero p {
        margin: 12px 0 18px;
        color: #f0f0f0;
      }
      .hero .actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .btn {
        background: var(--brand-green);
        color: var(--white);
        padding: 10px 16px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 700;
        transition: transform 0.18s ease, box-shadow 0.18s ease;
      }
      .btn.secondary {
        background: transparent;
        border: 2px solid rgba(255, 255, 255, 0.12);
        color: #fff;
      }
      .btn:hover {
        transform: translateY(-4px);
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.18);
      }

      /* ===== SECTIONS ===== */
      .section {
        padding: 56px 18px;
      }
      .container {
        max-width: 1100px;
        margin: 0 auto;
      }
      .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 16px;
      }
      .category-card {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        height: 150px;
        background: #eee;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
        transition: transform 0.28s ease;
      }
      .category-card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.45s ease;
      }
      .category-card h3 {
        position: absolute;
        left: 50%;
        bottom: 12px;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.42);
        padding: 6px 10px;
        border-radius: 8px;
        color: #fff;
      }
      .category-card:hover {
        transform: translateY(-8px);
      }

      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 24px;
      }
      .product-card {
        background: #fff;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
      }
      .product-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
      }
      .product-card img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        transition: transform 0.4s ease;
      }
      .product-card:hover img {
        transform: scale(1.08);
      }
      .product-card-body {
        padding: 16px;
      }

      .contact-btn {
        flex: 1;
        background: var(--brand-green);
        color: #fff;
        border: 0;
        padding: 12px 16px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }

      .contact-btn:hover {
        background: var(--brand-green-soft);
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 128, 0, 0.3);
      }

      .learn-more {
        background: #f5f5f5;
        border-radius: 10px;
        padding: 12px 16px;
        text-decoration: none;
        color: var(--brand-green);
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        text-align: center;
      }

      .learn-more:hover {
        background: #e8e8e8;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .product-card h4 {
        margin: 0 0 8px 0;
        font-size: 1.1rem;
        color: #222;
        font-weight: 600;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .product-card .price {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--brand-green);
        margin: 12px 0;
      }
      .product-actions {
        display: flex;
        gap: 10px;
        margin-top: 16px;
      }

      /* ===== STORY ===== */
      .story {
        background: #fff;
        border-radius: 12px;
        padding: 26px;
        box-shadow: 0 8px 28px rgba(0, 0, 0, 0.04);
        text-align: left;
      }
      .story h3 {
        color: var(--brand-green);
      }

      /* ===== STATS ===== */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }
      .stat-card {
        background: #fff;
        padding: 30px;
        border-radius: 12px;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
      }
      .stat-card h2 {
        font-size: 2.5rem;
        color: var(--brand-green);
        margin: 0;
      }
      .stat-card p {
        margin: 8px 0 0;
        color: #666;
      }

      /* ===== TESTIMONIALS ===== */
      #testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }
      .testimonial-card {
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
      }
      .testimonial-header {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-bottom: 12px;
      }
      .testimonial-header img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
      }
      .testimonial-card .stars {
        color: #ffa500;
        font-size: 0.9rem;
      }
      .testimonial-card p {
        font-style: italic;
        color: #555;
        margin: 10px 0;
      }
      .testimonial-card small {
        color: #888;
      }

      /* ===== FEATURED SHOPS ===== */
      #featured-sellers-carousel {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 24px;
        padding: 10px 0;
      }
      .shop-card {
        background: #fff;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        position: relative;
        transition: all 0.3s ease;
      }
      .shop-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.15);
      }
      .shop-banner {
        height: 120px;
        background: linear-gradient(
          135deg,
          var(--brand-green),
          var(--brand-green-soft)
        );
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .shop-logo {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 4px solid #fff;
        object-fit: cover;
        position: absolute;
        bottom: -40px;
        left: 50%;
        transform: translateX(-50%);
        background: #fff;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 2;
      }
      .shop-info {
        padding: 50px 20px 20px;
        text-align: center;
        position: relative;
        z-index: 1;
      }
      .shop-name {
        font-size: 1.1rem;
        font-weight: 700;
        color: #222;
        margin: 0 0 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }
      .verified-badge {
        color: var(--brand-green);
        font-size: 0.9rem;
      }
      .shop-tagline {
        font-size: 0.85rem;
        color: #666;
        margin: 0 0 16px;
        line-height: 1.4;
        min-height: 34px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .shop-stats {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 16px 0;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 8px;
      }
      .shop-stat {
        text-align: center;
      }
      .shop-stat-value {
        font-weight: 700;
        color: var(--brand-green);
        font-size: 1rem;
        display: block;
      }
      .shop-stat-label {
        font-size: 0.75rem;
        color: #888;
        margin-top: 2px;
      }
      .shop-actions {
        display: flex;
        gap: 8px;
        margin-top: 16px;
      }
      .btn-visit {
        flex: 1;
        padding: 10px 16px;
        background: var(--brand-green);
        color: #fff;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        text-align: center;
        transition: all 0.3s ease;
      }
      .btn-visit:hover {
        background: var(--brand-green-soft);
        transform: translateY(-2px);
      }
      .btn-follow {
        padding: 10px 12px;
        background: #f8f9fa;
        color: #666;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .btn-follow:hover {
        background: #e9ecef;
        color: #333;
      }
      .member-since {
        font-size: 0.75rem;
        color: #999;
        margin-top: 8px;
      }

      /* ===== TRENDING ===== */
      #trending-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 20px;
      }
      .badge.trending {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(255, 69, 0, 0.9);
        color: #fff;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
      }
      .product-image {
        height: 200px;
        background-size: cover;
        background-position: center;
        position: relative;
      }
      .product-info {
        padding: 15px;
      }
      .product-info h3 {
        font-size: 1rem;
        margin: 0 0 8px;
        color: #222;
      }
      .seller-name {
        font-size: 0.85rem;
        color: #666;
        margin: 5px 0;
      }

      /* ===== NEWSLETTER ===== */
      .newsletter-box {
        background: linear-gradient(
          135deg,
          var(--brand-green),
          var(--brand-green-soft)
        );
        padding: 40px;
        border-radius: 12px;
        text-align: center;
        color: #fff;
      }
      .newsletter-box h3 {
        margin: 0 0 10px;
        font-size: 1.8rem;
      }
      .newsletter-box p {
        margin: 0 0 20px;
        opacity: 0.9;
      }
      #newsletter-form {
        display: flex;
        gap: 10px;
        max-width: 500px;
        margin: 0 auto;
        flex-wrap: wrap;
        justify-content: center;
      }
      #newsletter-email {
        flex: 1;
        min-width: 250px;
        padding: 12px;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
      }
      #newsletter-form button {
        padding: 12px 24px;
        background: #fff;
        color: var(--brand-green);
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
      }

      /* ===== CAMPUS SELECTOR ===== */
      .campus-selector {
        background: #f9f9f9;
        padding: 30px;
        border-radius: 12px;
        text-align: center;
      }
      .campus-selector select {
        padding: 12px 20px;
        border-radius: 8px;
        border: 2px solid var(--brand-green);
        font-size: 1rem;
        min-width: 250px;
        cursor: pointer;
      }

      /* ===== MOBILE APP ===== */
      .app-download {
        display: flex;
        gap: 30px;
        align-items: center;
        background: #fff;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
      }
      .app-download img {
        width: 150px;
        height: 150px;
        object-fit: contain;
      }
      .app-info {
        flex: 1;
      }
      .app-info h3 {
        color: var(--brand-green);
        margin: 0 0 10px;
      }
      .app-stores {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }
      .app-stores a {
        display: inline-block;
      }
      .app-stores img {
        height: 40px;
      }

      @media (max-width: 768px) {
        .app-download {
          flex-direction: column;
          text-align: center;
        }
        #newsletter-form {
          flex-direction: column;
        }
        #newsletter-email {
          min-width: 100%;
        }
      }

      /* ===== FOOTER ===== */
      footer {
        background: linear-gradient(
          180deg,
          rgba(0, 128, 0, 0.85),
          rgba(0, 128, 0, 0.75)
        );
        color: #fff;
        padding: 20px 12px;
        border-top: 2px solid rgba(255, 255, 255, 0.12);
      }
      footer a {
        color: #c8f5c8;
      }

      /* ===== SCROLL TOP ===== */
      #scrollTopBtn {
        position: fixed;
        right: 14px;
        bottom: 14px;
        width: 44px;
        height: 44px;
        display: grid;
        place-items: center;
        background: var(--brand-green);
        color: #fff;
        border-radius: 10px;
        border: 0;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        cursor: pointer;
        z-index: 900;
        opacity: 0;
        transform: translateY(8px);
        transition: opacity 0.25s, transform 0.25s;
      }
      #scrollTopBtn.visible {
        opacity: 1;
        transform: none;
      }

      /* ===== FADE-IN ANIMATIONS ===== */
      .fade-in {
        opacity: 0;
        transform: translateY(12px);
        transition: opacity 0.7s ease, transform 0.7s ease;
        will-change: opacity, transform;
      }
      .fade-in.visible {
        opacity: 1;
        transform: none;
      }

      #menuToggle {
        z-index: 1001;
      }

      /* Tablets and below (up to 820px) */
      @media (max-width: 820px) {
        .header-bar {
          padding: 10px 18px;
          flex-wrap: nowrap;
        }

        #company-name,
        #company-name a {
          font-size: 1.9rem !important;
        }

        .hero {
          min-height: 80vh;
          padding: 60px 16px;
        }

        .hero .inner {
          padding: 20px;
        }

        .hero h2 {
          font-size: clamp(24px, 6vw, 42px);
        }

        .hero p {
          font-size: 1rem;
        }

        .products-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
        }

        .product-card img {
          height: 180px;
        }

        .categories-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 14px;
        }

        nav {
          display: flex;
          flex-direction: row; /* ✅ keeps nav links inline */
          justify-content: center;
          align-items: center;
          flex-wrap: wrap; /* ✅ wraps if needed */
          gap: 16px;
          margin-top: 10px;
          padding: 12px 18px;
          border-radius: 12px;
          background: linear-gradient(
            90deg,
            rgba(0, 128, 0, 0.14),
            rgba(0, 128, 0, 0.06)
          );
          backdrop-filter: blur(6px);
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
          animation: dropdownSlide 0.3s ease forwards;
        }

        nav.active {
          display: flex;
        }

        nav a {
          padding: 10px 14px;
          border-radius: 8px;
          text-align: center;
          font-size: 1rem;
          transition: background 0.25s ease;
        }

        nav a:hover {
          background: rgba(255, 255, 255, 0.12);
        }

        #company-wrap {
          flex: 1;
        }

        .header-utils {
          gap: 8px;
        }

        .profile-avatar {
          width: 34px;
          height: 34px;
        }

        .search-bar {
          min-width: 120px;
        }

        .hero {
          padding: 56px 12px;
        }
      }

      /* Phones (below 480px) */
      @media (max-width: 480px) {
        .header-bar {
          padding: 8px 12px;
        }

        #company-name,
        #company-name a {
          font-size: 1.5rem !important;
        }

        #menuToggle {
          display: inline-flex !important;
        }

        .hero {
          min-height: 70vh;
          padding: 40px 12px;
        }

        .hero .inner {
          padding: 16px;
        }

        .hero h2 {
          font-size: clamp(20px, 7vw, 32px);
          margin-bottom: 12px;
        }

        .hero p {
          font-size: 0.9rem;
          margin: 10px 0 16px;
        }

        .hero .actions {
          flex-direction: column;
          gap: 10px;
          width: 100%;
        }

        .btn {
          width: 100%;
          padding: 12px 20px;
          font-size: 0.95rem;
        }

        .section {
          padding: 40px 12px;
        }

        .container h3 {
          font-size: 1.3rem;
          margin-bottom: 16px;
        }

        .categories-grid {
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .category-card {
          height: 120px;
        }

        .category-card h3 {
          font-size: 0.9rem;
          padding: 5px 8px;
        }

        .products-grid {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        .product-card img {
          height: 200px;
        }

        .product-card-body {
          padding: 14px;
        }

        .product-card h4 {
          font-size: 1rem;
        }

        .product-card .price {
          font-size: 1.3rem;
          margin: 10px 0;
        }

        .product-actions {
          flex-direction: column;
          gap: 8px;
        }

        .contact-btn,
        .learn-more {
          width: 100%;
          padding: 10px 14px;
          font-size: 0.9rem;
        }

        .story {
          padding: 20px;
        }

        .story h3 {
          font-size: 1.2rem;
        }

        .story p {
          font-size: 0.95rem;
          line-height: 1.6;
        }

        footer {
          padding: 30px 12px;
        }

        footer .container {
          flex-direction: column;
          gap: 24px;
        }

        footer h3 {
          font-size: 1.1rem;
        }

        footer p,
        footer li {
          font-size: 0.9rem;
        }

        nav {
          display: none; /* hidden by default */
          flex-direction: column; /* stack vertically */
          justify-content: center;
          align-items: center;
          gap: 10px;
          position: absolute;
          top: 60px;
          left: 0;
          width: 100%;
          margin-top: 10px;
          padding: 20px 0;
          border-radius: 12px;
          background: linear-gradient(
            90deg,
            rgba(0, 128, 0, 0.5),
            rgba(0, 128, 0, 0.5)
          );
          text-align: center;
          z-index: 1000;
          transition: all 0.3s ease-in-out;
        }

        nav.active {
          display: flex; /* visible when toggled */
        }

        nav a {
          padding: 12px 0;
          font-size: 1.05rem;
          color: white;
          text-decoration: none;
        }

        nav a:hover {
          background: rgba(255, 255, 255, 0.1);
        }

        #company-name {
          font-size: 1.4rem !important;
        }

        .header-utils {
          font-size: 0.8rem;
          margin-left: 20px;
          gap: 2px;
        }
      }

      /* Ultra small devices (below 320px) */
      @media (max-width: 320px) {
        nav {
          padding: 12px 0;
        }

        .header-utils {
          max-width: 120px;
          width: fit-content;
          flex-shrink: 1;
          font-size: 0.75rem;
          gap: 2px;
          white-space: nowrap;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          transition: none !important;
          animation: none !important;
        }
      }
    </style>
  
    <script>
      // Global API Configuration
      window.API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' 
        ? 'http://localhost:5000' 
        : 'https://api.yourdomain.com';
      
      window.DEX_CONFIG = {
        API_BASE_URL: window.API_BASE_URL,
        WS_URL: window.API_BASE_URL.replace('http', 'ws'),
        MAX_FILE_SIZE: 10 * 1024 * 1024,
        ALLOWED_FILE_TYPES: ['image/jpeg', 'image/jpg', 'image/png', 'image/webp']
      };
    </script>
  </head>
  <body>
    <!-- PRELOADER -->
    <div id="preloader" role="status" aria-live="polite">
      <div class="preloader-frame" aria-hidden="true">
        <div
          class="pl-image"
          style="background-image: url('DEX_HOMEPAGES/images/hello.webp')"
          id="pl1"
        ></div>
        <div
          class="pl-image"
          style="background-image: url('DEX_HOMEPAGES/images/welcome_dex.webp')"
          id="pl2"
        ></div>
        <div class="pl-gradient"></div>
      </div>
      <div class="preloader-ui">
        <div class="preloader-logo">
          <div class="mark">D</div>
          <div class="preloader-text">Dex&trade;</div>
        </div>
        <div class="preloader-spinner" aria-hidden="true"></div>
      </div>
    </div>

    <header>
      <div class="header-bar" id="headerBar">
        <div
          style="display: flex; align-items: center; gap: 14px; min-width: 0"
          class="mobile_navigation_and_company_name"
        >
          <button
            id="menuToggle"
            aria-label="Toggle menu"
            aria-expanded="false"
            style="
              display: none;
              background: transparent;
              border: 0;
              color: var(--white);
              font-size: 1.125rem;
              cursor: pointer;
            "
          >
            <i class="fas fa-bars"></i>
          </button>
          <h1 id="company-name">
            <a href="Dex-home.html">Dex&trade;</a>
          </h1>
        </div>

        <nav aria-label="Primary navigation">
          <a href="Dex-home.html" class="active">Home</a>
          <!-- <a href="../DEX_HOMEPAGES/Dex-services.html">Services</a> -->
          <a href="DEX_HOMEPAGES/Dex-shop.html">Shop</a>
          <a href="DEX_INFO/Dex-about.html">About</a>
          <a href="DEX_CONTACT/Dex-contact.html">Contact</a>
        </nav>

        <div class="header-utils" id="header-utils" aria-live="polite">
          <div class="search-bar" role="search" aria-label="Site search">
            <input
              id="siteSearch"
              type="text"
              placeholder="Search..."
              aria-label="Search products"
            />
            <button id="searchBtn" aria-label="Search">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Notification Overlay -->
      <div class="overlay"></div>

      <!-- Notification Sidebar -->
      <div id="notificationSidebar">
        <div class="notif-header">
          <h3>Notifications</h3>
          <button id="clearAllBtn">Clear All</button>
        </div>
        <div id="notificationList"></div>
        <div id="notifEmptyState" style="display: none">
          <i class="fas fa-bell-slash"></i>
          <p>No new notifications</p>
        </div>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="inner fade-in">
          <h2 id="hero-title">Welcome to Dex&trade;</h2>
          <p id="hero-subtitle">
            A campus essentials marketplace designed to improve student life.
          </p>
          <div class="actions" id="hero-actions">
            <a class="btn" href="DEX_HOMEPAGES/Dex-shop.html">Shop Now</a>
            <a
              class="btn secondary"
              href="DEX_HOMEPAGES/REGISTORY_PAGES/seller_register.html"
              >Join as Seller</a
            >
          </div>
          <p id="hero-description" style="margin-top: 14px; color: #e9f0e9">
            Dex&trade; is a free advertising platform that helps sellers
            showcase their goods and services to customers. Join today, and
            let's shop and sell together.
          </p>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <h3 style="color: var(--brand-green); margin-bottom: 16px">
            Shop by Category
          </h3>
          <div class="categories-grid fade-in" id="categories-grid">
            <a class="category-card" href="DEX_HOMEPAGES/fashion.html" aria-label="Fashion">
              <img
                src="DEX_HOMEPAGES/images/fashion.webp"
                alt="Fashion"
                loading="lazy"
              />
              <h3>Fashion</h3>
            </a>
            <a
              class="category-card"
              href="DEX_HOMEPAGES/hostels.html"
              aria-label="Home & Living"
            >
              <img src="DEX_HOMEPAGES/images/welcome.webp" alt="Home" />
              <h3>Hostels</h3>
            </a>
            <a class="category-card" href="DEX_HOMEPAGES/electronics.html" aria-label="Gadgets">
              <img src="DEX_HOMEPAGES/images/Laptops.webp" alt="Gadgets" />
              <h3>Electronics</h3>
            </a>
            <!--<a
              class="category-card"
              href="food.html"
              aria-label="Food & Services"
            >
              <img
                src="DEX_HOMEPAGES/images/food.jpg"
                alt="Food"
              />
              <h3>Food & Services</h3>
            </a>-->
            <!--<a
              class="category-card"
              href="books.html"
              aria-label="Books & Stationery"
            >
              <img src="DEX_HOMEPAGES/images/books.webp" alt="Books" />
              <h3>Books & Stationery</h3>
            </a>-->
            <!--<a
              class="category-card"
              href="services.html"
              aria-label="Campus Services"
            >
              <img
                src="DEX_HOMEPAGES/images/services.jpg"
                alt="Services"
              />
              <h3>Campus Services</h3>
            </a>-->
          </div>
        </div>
      </section>

      <section class="section" style="background: #f9f9f9; padding: 40px 18px">
        <div class="container">
          <h3
            style="
              color: var(--brand-green);
              margin-bottom: 24px;
              text-align: center;
            "
          >
            <i class="fas fa-shield-alt" style="margin-right: 8px"></i>
            Why Dex™ is Safe & Trusted
          </h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 20px;
              margin-bottom: 20px;
            "
          >
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <i
                class="fas fa-user-check"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0">Verified Sellers</h4>
              <p style="font-size: 0.9rem; color: #666">
                All sellers verified with STU ID
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <i
                class="fas fa-handshake"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0">Meet on Campus</h4>
              <p style="font-size: 0.9rem; color: #666">
                Safe meetups in public areas
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <i
                class="fas fa-ban"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0">No Hidden Fees</h4>
              <p style="font-size: 0.9rem; color: #666">
                100% free platform forever
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <i
                class="fas fa-comments"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0">Direct Contact</h4>
              <p style="font-size: 0.9rem; color: #666">
                Chat directly with sellers
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="container">
          <h3 style="color: var(--brand-green); margin-bottom: 16px">
            Latest Products
          </h3>
          <div class="products-grid fade-in" id="products-grid">
            <div style="text-align: center; padding: 40px; grid-column: 1/-1">
              <i
                class="fas fa-spinner fa-spin"
                style="font-size: 2rem; color: var(--brand-green)"
              ></i>
              <p style="margin-top: 12px; color: #666">Loading products...</p>
            </div>
          </div>
          <div
            id="products-fallback"
            class="empty-fallback"
            style="
              display: none;
              margin-top: 14px;
              text-align: center;
              padding: 40px;
              color: #666;
            "
          >
            No products available yet. Check back soon!
          </div>
        </div>
      </section>

      <!-- HOW IT WORKS -->
      <section class="section" style="background: #f9f9f9">
        <div class="container">
          <h3
            style="
              color: var(--brand-green);
              text-align: center;
              margin-bottom: 30px;
            "
          >
            How Dex™ Works
          </h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 24px;
            "
          >
            <div
              style="
                background: #fff;
                padding: 24px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <div
                style="
                  width: 60px;
                  height: 60px;
                  background: var(--brand-green);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 16px;
                "
              >
                <span style="color: #fff; font-size: 1.5rem; font-weight: bold"
                  >1</span
                >
              </div>
              <h4 style="margin: 0 0 8px 0; color: #333">Browse Products</h4>
              <p style="margin: 0; color: #666; font-size: 0.9rem">
                Discover items from verified STU students in your area
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 24px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <div
                style="
                  width: 60px;
                  height: 60px;
                  background: var(--brand-green);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 16px;
                "
              >
                <span style="color: #fff; font-size: 1.5rem; font-weight: bold"
                  >2</span
                >
              </div>
              <h4 style="margin: 0 0 8px 0; color: #333">Contact Seller</h4>
              <p style="margin: 0; color: #666; font-size: 0.9rem">
                Chat directly via WhatsApp or phone - no middleman
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 24px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <div
                style="
                  width: 60px;
                  height: 60px;
                  background: var(--brand-green);
                  border-radius: 50%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  margin: 0 auto 16px;
                "
              >
                <span style="color: #fff; font-size: 1.5rem; font-weight: bold"
                  >3</span
                >
              </div>
              <h4 style="margin: 0 0 8px 0; color: #333">Meet on Campus</h4>
              <p style="margin: 0; color: #666; font-size: 0.9rem">
                Meet in public areas, inspect item, pay cash
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- SIMPLE STATS -->
      <section class="section">
        <div class="container">
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 20px;
              margin: 30px 0;
            "
          >
            <div
              style="
                background: #fff;
                padding: 30px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <h2
                style="font-size: 2.5rem; color: var(--brand-green); margin: 0"
                id="stat-products"
              >
                50+
              </h2>
              <p style="margin: 8px 0 0; color: #666">Products Listed</p>
            </div>
            <div
              style="
                background: #fff;
                padding: 30px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <h2
                style="font-size: 2.5rem; color: var(--brand-green); margin: 0"
                id="stat-sellers"
              >
                25+
              </h2>
              <p style="margin: 8px 0 0; color: #666">Active Sellers</p>
            </div>
            <div
              style="
                background: #fff;
                padding: 30px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
              "
            >
              <h2
                style="font-size: 2.5rem; color: var(--brand-green); margin: 0"
              >
                STU
              </h2>
              <p style="margin: 8px 0 0; color: #666">Campus Only</p>
            </div>
          </div>
        </div>
      </section>

      <!-- FEATURED SELLERS -->
      <section class="section" style="background: #f9f9f9">
        <div class="container">
          <h3 style="color: var(--brand-green); margin-bottom: 20px">
            🏪 Featured Shops
          </h3>
          <div id="featured-sellers-carousel"></div>
        </div>
      </section>

      <!-- WHY CHOOSE DEX -->
      <section class="section">
        <div class="container">
          <h3
            style="
              color: var(--brand-green);
              text-align: center;
              margin-bottom: 30px;
            "
          >
            Why Students Choose Dex™
          </h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 20px;
            "
          >
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
                border-left: 4px solid var(--brand-green);
              "
            >
              <i
                class="fas fa-shipping-fast"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0; color: #333">No Shipping Fees</h4>
              <p style="font-size: 0.9rem; color: #666; margin: 0">
                Meet on campus - no delivery costs
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
                border-left: 4px solid var(--brand-green);
              "
            >
              <i
                class="fas fa-eye"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0; color: #333">See Before You Buy</h4>
              <p style="font-size: 0.9rem; color: #666; margin: 0">
                Inspect items before paying
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
                border-left: 4px solid var(--brand-green);
              "
            >
              <i
                class="fas fa-users"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0; color: #333">
                Support Fellow Students
              </h4>
              <p style="font-size: 0.9rem; color: #666; margin: 0">
                Keep money in the STU community
              </p>
            </div>
            <div
              style="
                background: #fff;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
                border-left: 4px solid var(--brand-green);
              "
            >
              <i
                class="fas fa-gift"
                style="
                  font-size: 2.5rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <h4 style="margin: 8px 0; color: #333">100% Free Forever</h4>
              <p style="font-size: 0.9rem; color: #666; margin: 0">
                No hidden fees or commissions
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- RECENT ACTIVITY -->
      <section class="section" style="background: #f9f9f9">
        <div class="container">
          <h3
            style="
              color: var(--brand-green);
              text-align: center;
              margin-bottom: 30px;
            "
          >
            🔥 Recent Activity
          </h3>
          <div id="recent-activity" style="max-width: 600px; margin: 0 auto">
            <div style="text-align: center; padding: 40px; color: #666">
              <i
                class="fas fa-spinner fa-spin"
                style="
                  font-size: 2rem;
                  color: var(--brand-green);
                  margin-bottom: 12px;
                "
              ></i>
              <p>Loading recent activity...</p>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="container story">
          <h3>Our Story</h3>
          <p>
            Dex™ is a Digital Education Exchange built to empower students
            everywhere. It&apos;s more than just an online store — it&apos;s a
            campus-driven marketplace where students can buy, sell, and exchange
            educational essentials, gadgets, and lifestyle items in a trusted,
            student-first space. By connecting students through simplicity and
            innovation, Dex™ makes it easier to turn what you have into what you
            need — saving money, supporting peers, and building a smarter
            student economy.
          </p>
        </div>
      </section>
    </main>

    <footer>
      <div
        class="container"
        style="
          display: flex;
          gap: 18px;
          align-items: flex-start;
          justify-content: space-between;
          flex-wrap: wrap;
        "
      >
        <div>
          <h3>Quicklinks.</h3>
          <ul style="list-style: none; padding: 0; margin: 6px 0">
            <li>
              <a href="DEX_HOMEPAGES/Dex-home.html">Home</a>
            </li>
            <li><a href="DEX_INFO/Dex-about.html">About</a></li>
            <li>
              <a href="DEX_CONTACT/Dex-contact.html">Contact</a>
            </li>
            <li><a href="DEX_CONTACT/Dex-faq.html">FAQ</a></li>
          </ul>
        </div>

        <div>
          <h3>Follow Us on Social Media</h3>
          <div style="display: flex; gap: 8px; margin-top: 6px">
            <a
              href="https://facebook.com"
              target="_blank"
              rel="noopener noreferrer"
              ><i class="fab fa-facebook"></i
            ></a>
            <a
              href="https://twitter.com"
              target="_blank"
              rel="noopener noreferrer"
              ><i class="fab fa-twitter"></i
            ></a>
            <a
              href="https://instagram.com"
              target="_blank"
              rel="noopener noreferrer"
              ><i class="fab fa-instagram"></i
            ></a>
            <a
              href="https://linkedin.com"
              target="_blank"
              rel="noopener noreferrer"
              ><i class="fab fa-linkedin"></i
            ></a>
          </div>
        </div>

        <div>
          <h3>Contact Us</h3>
          <p>
            For inquiries and questions, reach us at
            <a href="mailto:Dex@gmail.com">Dex@gmail.com</a> or call us at
            <a href="tel:0502946803">0502946803</a>.
          </p>
        </div>
      </div>
      <div
        style="
          text-align: center;
          margin-top: 14px;
          color: rgba(234, 247, 234, 0.9);
        "
      >
        &copy; 2025 Dex&trade;. All rights reserved. &nbsp;
        <a href="DEX_LEGALPAGES/privacy.html">Privacy Policy</a>
        |
        <a href="DEX_LEGALPAGES/terms.html">Terms of Service</a>
      </div>
    </footer>

    <button id="scrollTopBtn" aria-label="Scroll to top" title="Back to top">
      <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Safety Tips Modal -->
    <div
      id="safetyModal"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      "
    >
      <div
        style="
          background: #fff;
          border-radius: 16px;
          max-width: 500px;
          width: 100%;
          padding: 30px;
          position: relative;
        "
      >
        <button
          onclick="document.getElementById('safetyModal').style.display='none';localStorage.setItem('safetyTipsSeen','true');"
          style="
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
          "
        >
          &times;
        </button>
        <h3 style="color: var(--brand-green); margin-bottom: 20px">
          <i class="fas fa-shield-alt"></i> Stay Safe on Dex™
        </h3>
        <ul style="list-style: none; padding: 0; margin: 0">
          <li style="padding: 10px 0; border-bottom: 1px solid #eee">
            <i
              class="fas fa-check-circle"
              style="color: var(--brand-green); margin-right: 8px"
            ></i>
            Meet in public campus locations
          </li>
          <li style="padding: 10px 0; border-bottom: 1px solid #eee">
            <i
              class="fas fa-check-circle"
              style="color: var(--brand-green); margin-right: 8px"
            ></i>
            Inspect items before paying
          </li>
          <li style="padding: 10px 0; border-bottom: 1px solid #eee">
            <i
              class="fas fa-check-circle"
              style="color: var(--brand-green); margin-right: 8px"
            ></i>
            Never share banking passwords
          </li>
          <li style="padding: 10px 0; border-bottom: 1px solid #eee">
            <i
              class="fas fa-check-circle"
              style="color: var(--brand-green); margin-right: 8px"
            ></i>
            Report suspicious listings
          </li>
          <li style="padding: 10px 0">
            <i
              class="fas fa-check-circle"
              style="color: var(--brand-green); margin-right: 8px"
            ></i>
            Only deal with verified sellers
          </li>
        </ul>
        <button
          onclick="document.getElementById('safetyModal').style.display='none';localStorage.setItem('safetyTipsSeen','true');"
          style="
            width: 100%;
            margin-top: 20px;
            padding: 12px;
            background: var(--brand-green);
            color: #fff;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
          "
        >
          Got it!
        </button>
      </div>
    </div>

    <!-- Hidden Admin Access -->
    <div style="position:fixed;bottom:0;right:0;width:1px;height:1px;opacity:0;">
      <button onclick="localStorage.setItem('adminSecretKey','DEX_ADMIN_2024_SECURE_KEY');window.location.href='secret-dex-admin-2024/login.html'">.</button>
    </div>

    <script type="module">
      window.addEventListener("DOMContentLoaded", async () => {
        try {
          const { loadFeaturedSellers } = await import(
            "./DEX_HOMEPAGES/assets/js/modules/featured-sellers.js?v=" +
              Date.now()
          );
          loadFeaturedSellers();
        } catch (err) {
          console.error("Failed to load featured sellers:", err);
          loadFallbackShops();
        }
        loadRecentActivity();
        updateRealStats();
      });

      // Fallback shops when module fails
      function loadFallbackShops() {
        const container = document.getElementById("featured-sellers-carousel");
        container.innerHTML = `
          <div class="shop-card">
            <div class="shop-banner" style="background: linear-gradient(135deg, #008000, #70bb70)">
              <span style="position:absolute;top:8px;right:8px;background:rgba(255,255,255,0.9);color:#333;padding:4px 8px;border-radius:12px;font-size:0.7rem;font-weight:600;">Electronics</span>
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Cpath d='M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H14V4H19V9Z'/%3E%3C/svg%3E" alt="Tech Shop" class="shop-logo">
            </div>
            <div class="shop-info">
              <div class="shop-name">Tech Shop <span class="verified-badge">✓</span></div>
              <div class="shop-tagline">Quality electronics for students</div>
              <div class="shop-stats">
                <div class="shop-stat"><span class="shop-stat-value">⭐ 4.8</span><div class="shop-stat-label">Rating</div></div>
                <div class="shop-stat"><span class="shop-stat-value">15</span><div class="shop-stat-label">Products</div></div>
                <div class="shop-stat"><span class="shop-stat-value">45</span><div class="shop-stat-label">Followers</div></div>
              </div>
              <div class="shop-actions">
                <a href="DEX_HOMEPAGES/sellerShop.html?sellerId=demo1" class="btn-visit">Visit Shop</a>
                <button class="btn-follow">Follow</button>
              </div>
              <div class="member-since">Member since 2024</div>
            </div>
          </div>
          <div class="shop-card">
            <div class="shop-banner" style="background: linear-gradient(135deg, #ff6b6b, #ee5a52)">
              <span style="position:absolute;top:8px;right:8px;background:rgba(255,255,255,0.9);color:#333;padding:4px 8px;border-radius:12px;font-size:0.7rem;font-weight:600;">Fashion</span>
              <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Cpath d='M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 9H14V4H19V9Z'/%3E%3C/svg%3E" alt="Style Hub" class="shop-logo">
            </div>
            <div class="shop-info">
              <div class="shop-name">Style Hub <span class="verified-badge">✓</span></div>
              <div class="shop-tagline">Trendy fashion for campus life</div>
              <div class="shop-stats">
                <div class="shop-stat"><span class="shop-stat-value">⭐ 4.6</span><div class="shop-stat-label">Rating</div></div>
                <div class="shop-stat"><span class="shop-stat-value">22</span><div class="shop-stat-label">Products</div></div>
                <div class="shop-stat"><span class="shop-stat-value">38</span><div class="shop-stat-label">Followers</div></div>
              </div>
              <div class="shop-actions">
                <a href="DEX_HOMEPAGES/sellerShop.html?sellerId=demo2" class="btn-visit">Visit Shop</a>
                <button class="btn-follow">Follow</button>
              </div>
              <div class="member-since">Member since 2024</div>
            </div>
          </div>
        `;
      }

      // Load recent activity from products
      async function loadRecentActivity() {
        try {
          const res = await fetch("http://localhost:5000/api/products");
          if (!res.ok) throw new Error("API not available");

          const data = await res.json();
          const products = Array.isArray(data) ? data : data.products || [];

          const container = document.getElementById("recent-activity");
          if (products.length === 0) {
            container.innerHTML =
              '<p style="text-align:center;color:#666;padding:2rem;">No recent activity yet. Be the first to list a product!</p>';
            return;
          }

          // Create activity from recent products
          const activities = products.slice(0, 3).map((product) => ({
            icon: "fas fa-plus-circle",
            text: `New listing: ${product.name}`,
            time: "Recently",
          }));

          container.innerHTML = activities
            .map(
              (activity) => `
            <div style="background:#fff;padding:16px;margin-bottom:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.06);display:flex;align-items:center;gap:12px;">
              <div style="width:40px;height:40px;background:var(--brand-green);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                <i class="${activity.icon}" style="color:#fff;font-size:1rem;"></i>
              </div>
              <div style="flex:1;">
                <p style="margin:0;color:#333;font-size:0.9rem;">${activity.text}</p>
                <small style="color:#888;">${activity.time}</small>
              </div>
            </div>
          `
            )
            .join("");
        } catch (err) {
          // Fallback activity data
          const container = document.getElementById("recent-activity");
          container.innerHTML = `
            <div style="background:#fff;padding:16px;margin-bottom:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.06);display:flex;align-items:center;gap:12px;">
              <div style="width:40px;height:40px;background:var(--brand-green);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                <i class="fas fa-plus-circle" style="color:#fff;font-size:1rem;"></i>
              </div>
              <div style="flex:1;">
                <p style="margin:0;color:#333;font-size:0.9rem;">New listing: iPhone 13 Pro</p>
                <small style="color:#888;">2 hours ago</small>
              </div>
            </div>
            <div style="background:#fff;padding:16px;margin-bottom:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.06);display:flex;align-items:center;gap:12px;">
              <div style="width:40px;height:40px;background:var(--brand-green);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                <i class="fas fa-plus-circle" style="color:#fff;font-size:1rem;"></i>
              </div>
              <div style="flex:1;">
                <p style="margin:0;color:#333;font-size:0.9rem;">New listing: Nike Air Force 1</p>
                <small style="color:#888;">5 hours ago</small>
              </div>
            </div>
            <div style="background:#fff;padding:16px;margin-bottom:12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.06);display:flex;align-items:center;gap:12px;">
              <div style="width:40px;height:40px;background:var(--brand-green);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                <i class="fas fa-plus-circle" style="color:#fff;font-size:1rem;"></i>
              </div>
              <div style="flex:1;">
                <p style="margin:0;color:#333;font-size:0.9rem;">New listing: MacBook Pro M2</p>
                <small style="color:#888;">1 day ago</small>
              </div>
            </div>
          `;
        }
      }

      // Update stats with real numbers
      async function updateRealStats() {
        try {
          const productsRes = await fetch("http://localhost:5000/api/products");

          if (productsRes.ok) {
            const data = await productsRes.json();
            const products = Array.isArray(data) ? data : data.products || [];
            const count = products.length;
            const displayCount =
              count < 10
                ? "10+"
                : count < 50
                ? "50+"
                : count < 100
                ? "100+"
                : `${Math.floor(count / 100) * 100}+`;
            document.getElementById("stat-products").textContent = displayCount;

            // Estimate sellers from products (unique seller IDs)
            const uniqueSellers = new Set(
              products.map((p) => p.sellerId || p.seller)
            ).size;
            const sellerCount =
              uniqueSellers < 5
                ? "5+"
                : uniqueSellers < 25
                ? "25+"
                : uniqueSellers < 50
                ? "50+"
                : `${Math.floor(uniqueSellers / 25) * 25}+`;
            document.getElementById("stat-sellers").textContent = sellerCount;
          }
        } catch (err) {
          // Keep default values if API fails
        }
      }
    </script>
    <script>
      /* =========================
      HIDDEN ADMIN ACCESS
   ========================= */
      // Keyboard shortcut: Ctrl+Shift+A
      document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.shiftKey && e.key === 'A') {
          localStorage.setItem('adminSecretKey', 'DEX_ADMIN_2024_SECURE_KEY');
          window.location.href = 'secret-dex-admin-2024/login.html';
        }
      });

      // Secret URL access
      if (window.location.hash === '#admin-access-2024') {
        localStorage.setItem('adminSecretKey', 'DEX_ADMIN_2024_SECURE_KEY');
        window.location.href = 'secret-dex-admin-2024/login.html';
      }

      /* =========================
      LEGACY SUPPORT
   ========================= */
      let products = [];

      async function loadProducts() {
        const cached = localStorage.getItem("cachedProducts");
        const cacheTime = localStorage.getItem("cacheTime");
        const now = Date.now();

        if (cached && cacheTime && now - parseInt(cacheTime) < 300000) {
          products = JSON.parse(cached);
          renderProducts();
        }

        try {
          const res = await fetch("http://localhost:5000/api/products");
          if (res.ok) {
            const data = await res.json();
            products = data.products || data || [];
            localStorage.setItem("cachedProducts", JSON.stringify(products));
            localStorage.setItem("cacheTime", now.toString());
            if (cached) renderProducts();
            return products;
          }
        } catch (err) {
          console.warn("Backend not reachable, using cache");
          if (cached) products = JSON.parse(cached);
        }
        return products;
      }

      /* =========================
      UTILITIES
   ========================= */
      function shuffleArray(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      }

      function showToast(msg, d = 1800) {
        const t = document.createElement("div");
        t.textContent = msg;
        Object.assign(t.style, {
          position: "fixed",
          right: "20px",
          bottom: "20px",
          background: "rgba(0,0,0,0.8)",
          color: "#fff",
          padding: "12px 16px",
          borderRadius: "8px",
          zIndex: 9999,
        });
        document.body.appendChild(t);
        setTimeout(() => t.remove(), d);
      }

      /* =========================
      RENDER PRODUCTS
   ========================= */
      function renderProducts(arr = products) {
        const grid = document.getElementById("products-grid");
        const fallback = document.getElementById("products-fallback");

        if (!arr || arr.length === 0) {
          grid.innerHTML = "";
          if (fallback) fallback.style.display = "block";
          return;
        }
        if (fallback) fallback.style.display = "none";

        const displayProducts = arr.slice(0, 9);
        const fragment = document.createDocumentFragment();
        displayProducts.forEach((p) => {
          const card = document.createElement("div");
          card.className = "product-card fade-in";
          const imgUrl = p.images?.[0]
            ? `http://localhost:5000${p.images[0]}`
            : "DEX_HOMEPAGES/images/placeholder.jpg";

          const rating = p.sellerRating || 0;
          const reviewCount = p.reviewCount || 0;
          const isVerified = p.sellerVerified === true;
          const memberSince = p.sellerMemberSince || new Date().getFullYear();

          card.innerHTML = `
      <img src="${imgUrl}" alt="${p.name}" loading="lazy" />
      ${
        isVerified
          ? '<span style="position:absolute;top:8px;left:8px;background:rgba(0,128,0,0.9);color:#fff;padding:4px 8px;border-radius:6px;font-size:0.75rem;font-weight:600;"><i class="fas fa-check-circle"></i> Verified</span>'
          : ""
      }
      <div class="product-card-body">
        <h4>${p.name}</h4>
        ${
          rating > 0
            ? `
        <div style="display:flex;align-items:center;gap:8px;margin:8px 0;">
          <div style="color:#ffa500;font-size:0.9rem;">
            ${"★".repeat(Math.floor(rating))}${"☆".repeat(
                5 - Math.floor(rating)
              )}
          </div>
          <span style="font-size:0.85rem;color:#666;">(${reviewCount})</span>
        </div>`
            : `<div style="font-size:0.85rem;color:#999;margin:8px 0;">No reviews yet</div>`
        }
        <div style="font-size:0.8rem;color:#888;margin-bottom:8px;">Member since ${memberSince}</div>
        <div class="price">₵${Number(p.price).toLocaleString()}</div>
        <div class="product-actions">
          <a class="learn-more" href="DEX_HOMEPAGES/Dex-product-details.html?id=${
            p.id
          }">View Details</a>
        </div>
        <button style="position:absolute;top:8px;right:8px;background:rgba(255,255,255,0.9);border:none;padding:6px 10px;border-radius:6px;cursor:pointer;font-size:0.75rem;color:#e74c3c;" onclick="event.stopPropagation();alert('Report submitted. We will review this listing.');"><i class="fas fa-flag"></i></button>
      </div>
    `;

          const btn = card.querySelector("button");
          btn.addEventListener("click", () => {
            // Check if user is logged in
            const currentUser =
              JSON.parse(localStorage.getItem("currentUser")) ||
              JSON.parse(sessionStorage.getItem("currentUser"));

            if (!currentUser) {
              if (confirm("You need to sign in to buy items. Sign in now?")) {
                window.location.href =
                  "DEX_HOMEPAGES/REGISTRY_PAGES/Sign_in.html";
              }
              return;
            }

            // If logged in
            alert(`Contact the seller to buy ${p.name}`);
            // Example for WhatsApp or other messaging integration:
            // window.open(`https://wa.me/${p.sellerPhone}?text=Hi, I want to buy ${p.name}`);
          });

          fragment.appendChild(card);
        });
        grid.innerHTML = "";
        grid.appendChild(fragment);
        requestAnimationFrame(() => observeFadeIns());
      }

      /* =========================
      NOTIFICATION SYSTEM (exact copy from shop)
   ========================= */
      const API = "http://localhost:5000/api";
      let notifications = [];

      function getToken() {
        try {
          const user = JSON.parse(
            localStorage.getItem("currentUser") ||
              sessionStorage.getItem("currentUser") ||
              "null"
          );
          return user?.token || user?.accessToken || "";
        } catch {
          return "";
        }
      }

      const typeConfig = {
        order: { emoji: "🛒", color: "order" },
        message: { emoji: "✉️", color: "message" },
        review: { emoji: "⭐", color: "review" },
        verification: { emoji: "✅", color: "system" },
        system: { emoji: "📢", color: "system" },
        error: { emoji: "⚠️", color: "error" },
        default: { emoji: "🔔", color: "system" },
      };

      function updateNotificationsUI() {
        const notificationList = document.getElementById("notificationList");
        const notificationBadge = document.getElementById("notificationBadge");
        const notifEmptyState = document.getElementById("notifEmptyState");

        const unreadCount = notifications.filter((n) => !n.read).length;
        if (notificationBadge) {
          notificationBadge.textContent =
            unreadCount > 99 ? "99+" : unreadCount;
          notificationBadge.style.display = unreadCount ? "grid" : "none";
        }

        notificationList.innerHTML = "";
        if (!notifications.length) {
          notifEmptyState.style.display = "block";
          return;
        }
        notifEmptyState.style.display = "none";

        notifications.forEach((notif, idx) => {
          const config = typeConfig[notif.type] || typeConfig.default;
          const item = document.createElement("div");
          item.className = `notif-item ${notif.read ? "" : "unread"} visible`;
          item.style.animationDelay = `${idx * 80}ms`;

          const time = new Date(notif.createdAt).toLocaleString([], {
            month: "short",
            day: "numeric",
            hour: "2-digit",
            minute: "2-digit",
          });

          item.innerHTML = `
            <div class="notif-inner">
              <div class="notif-icon ${config.color}">${config.emoji}</div>
              <div class="notif-content">
                <h4>${notif.title || "Notification"}</h4>
                <p>${notif.message}</p>
                <div class="notif-time">${time}</div>
              </div>
            </div>
          `;
          item.onclick = () => markAsRead(notif.id);
          notificationList.appendChild(item);
        });
      }

      async function markAsRead(id) {
        try {
          await fetch(`${API}/notifications/${id}/read`, {
            method: "POST",
            headers: {
              Authorization: `Bearer ${getToken()}`,
              "Content-Type": "application/json",
            },
          });
        } catch (e) {
          console.warn("Offline");
        }
        notifications = notifications.map((n) =>
          n.id === id ? { ...n, read: true } : n
        );
        updateNotificationsUI();
      }

      async function clearAll() {
        if (!confirm("Clear all notifications?")) return;
        try {
          await fetch(`${API}/notifications/clear`, {
            method: "POST",
            headers: {
              Authorization: `Bearer ${getToken()}`,
              "Content-Type": "application/json",
            },
          });
          notifications = [];
        } catch (e) {
          alert("Offline");
        }
        updateNotificationsUI();
      }

      async function fetchNotifications() {
        try {
          const res = await fetch(`${API}/notifications`, {
            headers: { Authorization: `Bearer ${getToken()}` },
          });
          if (!res.ok) throw new Error();
          const data = await res.json();
          notifications = data.notifications || data || [];
          updateNotificationsUI();
        } catch (e) {
          console.warn("Offline notifications");
        }
      }

      function initNotifications() {
        const notificationBtn = document.getElementById("notificationBtn");
        const notificationSidebar = document.getElementById(
          "notificationSidebar"
        );
        const overlay = document.querySelector(".overlay");
        const clearAllBtn = document.getElementById("clearAllBtn");

        if (!getToken()) return;

        notificationBtn.style.display = "block";

        notificationBtn.onclick = (e) => {
          e.stopPropagation();
          const isOpen = notificationSidebar.classList.contains("open");
          notificationSidebar.classList.toggle("open", !isOpen);
          overlay.classList.toggle("active", !isOpen);
          document.body.style.overflow = isOpen ? "" : "hidden";
          if (!isOpen) fetchNotifications();
        };

        overlay.onclick = () => {
          notificationSidebar.classList.remove("open");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
        };

        document.addEventListener("click", (e) => {
          if (
            notificationSidebar.classList.contains("open") &&
            !notificationSidebar.contains(e.target) &&
            !notificationBtn.contains(e.target)
          ) {
            notificationSidebar.classList.remove("open");
            overlay.classList.remove("active");
            document.body.style.overflow = "";
          }
        });

        if (clearAllBtn) clearAllBtn.onclick = clearAll;

        fetchNotifications();
        setInterval(() => getToken() && fetchNotifications(), 15000);
      }

      /* =========================
      SEARCH SETUP
   ========================= */
      function setupSearch() {
        const input = document.getElementById("siteSearch");
        input?.addEventListener("input", () => {
          const q = input.value.toLowerCase();
          const filtered = products.filter(
            (p) =>
              p.name.toLowerCase().includes(q) ||
              (p.category && p.category.toLowerCase().includes(q)) ||
              p.price.toString().includes(q)
          );
          renderProducts(filtered);
        });
      }

      /* =========================
      HEADER & USER UI
   ========================= */
      const headerUtils = document.getElementById("header-utils");

      function createLink(href, text, iconClass) {
        const a = document.createElement("a");
        a.href = href;
        if (iconClass) {
          const i = document.createElement("i");
          i.className = iconClass;
          i.style.marginRight = "6px";
          a.appendChild(i);
        }
        a.appendChild(document.createTextNode(text));
        return a;
      }

      function handleLogout(e) {
        e?.preventDefault();
        if (!confirm("Logout?")) return;
        localStorage.removeItem("currentUser");
        sessionStorage.removeItem("currentUser");
        window.location.href = "DEX_HOMEPAGES/REGISTRY_PAGES/Sign_in.html";
      }

      function loadUserUI(currentUser) {
        headerUtils.innerHTML = "";
        if (!currentUser) {
          headerUtils.appendChild(
            createLink("DEX_HOMEPAGES/REGISTRY_PAGES/Sign_in.html", "Sign in")
          );
          return;
        }

        const profileContainer = document.createElement("div");
        profileContainer.style.display = "flex";
        profileContainer.style.alignItems = "center";
        profileContainer.style.gap = "10px";

        const img = document.createElement("img");
        const profilePicUrl = currentUser.profilePic
          ? currentUser.profilePic.startsWith("http")
            ? currentUser.profilePic
            : `http://localhost:5000${currentUser.profilePic}`
          : "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ccc'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E";
        img.src = profilePicUrl;
        img.alt = "Profile";
        Object.assign(img.style, {
          width: "35px",
          height: "35px",
          borderRadius: "50%",
          objectFit: "cover",
          border: "2px solid var(--brand-green)",
          cursor: "pointer",
        });
        img.addEventListener("click", () => {
          if (currentUser.role === "buyer")
            window.location.href =
              "DEX_HOMEPAGES/PROFILE_PAGES/Buyer_profile.html";
          else if (currentUser.role === "seller")
            window.location.href =
              "DEX_HOMEPAGES/PROFILE_PAGES/Sellers_page.html";
          else
            window.location.href = "DEX_HOMEPAGES/REGISTRY_PAGES/Sign_in.html";
        });
        profileContainer.appendChild(img);
        headerUtils.appendChild(profileContainer);

        // ===== NOTIFICATION SIDEBAR ELEMENTS ===== //
        const notifOverlay = document.getElementById("notifOverlay");
        const notifSidebar = document.getElementById("notifSidebar");
        const closeNotif = document.getElementById("closeNotif");

        // ===== NOTIFICATION BELL (CREATION) ===== //
        const notifBell = document.createElement("div");
        notifBell.id = "notificationBtn";
        notifBell.style.position = "relative";
        notifBell.style.display = "none";

        const bellIcon = document.createElement("i");
        bellIcon.className = "fas fa-bell";
        notifBell.appendChild(bellIcon);

        const notifBadge = document.createElement("span");
        notifBadge.id = "notificationBadge";
        notifBadge.style.display = "none";
        notifBell.appendChild(notifBadge);

        headerUtils.appendChild(notifBell);

        // Initialize notification system
        initNotifications();

        // ===== LOGOUT ICON ===== //
        const logout = document.createElement("a");
        logout.href = "#";
        logout.innerHTML = '<i class="fas fa-right-from-bracket"></i>';
        logout.style.fontSize = "1.2rem";
        logout.style.display = "flex";
        logout.style.alignItems = "center";
        logout.style.cursor = "pointer";
        logout.title = "Logout";

        logout.onmouseenter = () =>
          (logout.firstChild.style.transform = "scale(1.2)");
        logout.onmouseleave = () =>
          (logout.firstChild.style.transform = "scale(1)");

        logout.addEventListener("click", handleLogout);
        headerUtils.appendChild(logout);
      }

      function loadHeaderLinks() {
        const currentUser =
          JSON.parse(localStorage.getItem("currentUser")) ||
          JSON.parse(sessionStorage.getItem("currentUser"));
        loadUserUI(currentUser);
      }

      /* =========================
      FADE-IN OBSERVER
   ========================= */
      function observeFadeIns() {
        const faders = document.querySelectorAll(".fade-in");
        const obs = new IntersectionObserver((entries, ob) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
              ob.unobserve(entry.target);
            }
          });
        });
        faders.forEach((el) => obs.observe(el));
      }

      /* =========================
      SCROLL LISTENERS
   ========================= */
      const headerBar = document.getElementById("headerBar");
      const scrollBtn = document.getElementById("scrollTopBtn");
      window.addEventListener("scroll", () => {
        headerBar?.classList.toggle("scrolled", window.scrollY > 60);
        scrollBtn?.classList.toggle("visible", window.scrollY > 300);
      });
      scrollBtn?.addEventListener("click", () =>
        window.scrollTo({ top: 0, behavior: "smooth" })
      );

      /* =========================
      HERO DYNAMIC CONTENT
   ========================= */
      const inspirationalMessages = [
        {
          title: "Welcome to Dex™",
          subtitle:
            "A campus essentials marketplace designed to improve student life.",
        },
        {
          title: "Shop Smart, Shop Safe",
          subtitle:
            "Every transaction happens on campus. Meet sellers face-to-face.",
        },
        {
          title: "Built by Students, For Students",
          subtitle: "Supporting the STU community, one deal at a time.",
        },
        {
          title: "Your Campus, Your Marketplace",
          subtitle:
            "Buy and sell with people you trust - your fellow students.",
        },
        {
          title: "Zero Fees, Maximum Trust",
          subtitle:
            "100% free platform. No hidden charges. Just honest trading.",
        },
        {
          title: "Trade Safely, Trade Locally",
          subtitle:
            "No shipping risks. No online scams. Just campus connections.",
        },
        {
          title: "From Student to Student",
          subtitle:
            "Every deal supports a fellow STU student. Keep money on campus.",
        },
        {
          title: "Your Safety is Our Priority",
          subtitle:
            "Verified sellers. Public meetups. Transparent transactions.",
        },
        {
          title: "More Than a Marketplace",
          subtitle:
            "Building a trusted community where students help students.",
        },
        {
          title: "Smart Shopping Starts Here",
          subtitle:
            "Find what you need without leaving campus. Save time and money.",
        },
        {
          title: "Sell What You Don't Need",
          subtitle:
            "Turn unused items into cash. Help others while decluttering.",
        },
        {
          title: "No Middleman, No Hassle",
          subtitle:
            "Direct contact with sellers. Negotiate freely. Deal confidently.",
        },
        {
          title: "Join Thousands of STU Students",
          subtitle:
            "Be part of the most trusted campus marketplace in Nigeria.",
        },
        {
          title: "Quality Meets Affordability",
          subtitle:
            "Student-friendly prices on everything from books to electronics.",
        },
        {
          title: "Your Trust, Our Mission",
          subtitle:
            "Every feature designed with student safety and convenience in mind.",
        },
      ];

      let messageIndex = 0;
      let guestMessageInterval = null;

      function rotateGuestMessage() {
        const heroTitle = document.getElementById("hero-title");
        const heroSubtitle = document.getElementById("hero-subtitle");

        messageIndex = (messageIndex + 1) % inspirationalMessages.length;
        const msg = inspirationalMessages[messageIndex];

        heroTitle.style.opacity = "0";
        heroSubtitle.style.opacity = "0";

        setTimeout(() => {
          heroTitle.textContent = msg.title;
          heroSubtitle.textContent = msg.subtitle;
          heroTitle.style.opacity = "1";
          heroSubtitle.style.opacity = "1";
        }, 500);
      }

      let heroImageInterval = null;
      let currentImageIndex = 0;

      function updateHeroContent() {
        const currentUser = JSON.parse(
          localStorage.getItem("currentUser") ||
            sessionStorage.getItem("currentUser") ||
            "null"
        );
        const heroTitle = document.getElementById("hero-title");
        const heroSubtitle = document.getElementById("hero-subtitle");
        const heroActions = document.getElementById("hero-actions");
        const heroDescription = document.getElementById("hero-description");
        const heroSection = document.querySelector(".hero");

        if (guestMessageInterval) {
          clearInterval(guestMessageInterval);
          guestMessageInterval = null;
        }
        if (heroImageInterval) {
          clearInterval(heroImageInterval);
          heroImageInterval = null;
        }

        if (!currentUser) {
          heroSection.style.backgroundImage =
            "linear-gradient(180deg, rgba(2, 82, 2, 0.6), rgba(0, 0, 0, 0.45)), url('DEX_HOMEPAGES/images/welcome.webp')";
          heroTitle.textContent = "Welcome to Dex™";
          heroSubtitle.textContent =
            "A campus essentials marketplace designed to improve student life.";
          heroActions.innerHTML = `
            <a class="btn" href="DEX_HOMEPAGES/Dex-shop.html">Shop Now</a>
            <a class="btn secondary" href="DEX_HOMEPAGES/REGISTRY_PAGES/seller_register.html">Join as Seller</a>
          `;
          heroDescription.textContent =
            "Dex™ is a free advertising platform that helps sellers showcase their goods and services to customers. Join today, and let's shop and sell together.";
          messageIndex = 0;
          guestMessageInterval = setInterval(rotateGuestMessage, 9000);
        } else if (currentUser.role === "buyer") {
          const buyerImages = [
            "DEX_HOMEPAGES/images/pexels-fernando-cortes-222333079-30747177.webp",
            "DEX_HOMEPAGES/images/pexels-ryan-horn-1218656-2318005.webp",
            "DEX_HOMEPAGES/images/pexels-pixabay-269220.webp",
            "DEX_HOMEPAGES/images/pexels-maxyne-barcel-144474667-10402280.webp",
            "DEX_HOMEPAGES/images/pexels-filirovska-4913772.webp",
          ];
          currentImageIndex = 0;
          heroSection.style.backgroundImage = `linear-gradient(180deg, rgba(2, 82, 2, 0.6), rgba(0, 0, 0, 0.45)), url('${buyerImages[0]}')`;
          heroImageInterval = setInterval(() => {
            heroSection.style.opacity = "0.7";
            setTimeout(() => {
              currentImageIndex = (currentImageIndex + 1) % buyerImages.length;
              heroSection.style.backgroundImage = `linear-gradient(180deg, rgba(2, 82, 2, 0.6), rgba(0, 0, 0, 0.45)), url('${buyerImages[currentImageIndex]}')`;
              heroSection.style.opacity = "1";
            }, 400);
          }, 8000);
          heroTitle.textContent = `Welcome Back, ${
            currentUser.name?.split(" ")[0] || "Buyer"
          }! 🛍️`;
          heroSubtitle.textContent =
            "Discover amazing deals from verified STU sellers";
          heroActions.innerHTML = `
            <a class="btn" href="DEX_HOMEPAGES/Dex-shop.html">Browse Products</a>
            <a class="btn secondary" href="DEX_HOMEPAGES/PROFILE_PAGES/Buyer_profile.html">My Profile</a>
          `;
          heroDescription.textContent =
            "Shop safely on campus. All sellers are verified STU students. Meet in public areas and never pay before seeing the item.";
        } else if (currentUser.role === "seller") {
          const sellerImages = [
            "DEX_HOMEPAGES/images/bg-hostels.webp",
            "DEX_HOMEPAGES/images/accademic.webp",
            "DEX_HOMEPAGES/images/bg-electronics.webp",
            "DEX_HOMEPAGES/images/bg-fashion.webp",
            "DEX_HOMEPAGES/images/shop.webp",
          ];
          currentImageIndex = 0;
          heroSection.style.backgroundImage = `linear-gradient(180deg, rgba(2, 82, 2, 0.6), rgba(0, 0, 0, 0.45)), url('${sellerImages[0]}')`;
          heroImageInterval = setInterval(() => {
            heroSection.style.opacity = "0.7";
            setTimeout(() => {
              currentImageIndex = (currentImageIndex + 1) % sellerImages.length;
              heroSection.style.backgroundImage = `linear-gradient(180deg, rgba(2, 82, 2, 0.6), rgba(0, 0, 0, 0.45)), url('${sellerImages[currentImageIndex]}')`;
              heroSection.style.opacity = "1";
            }, 400);
          }, 8000);
          heroTitle.textContent = `Welcome Back, ${
            currentUser.name?.split(" ")[0] || "Seller"
          }! 🏪`;
          heroSubtitle.textContent = "Manage your shop and reach more students";
          heroActions.innerHTML = `
            <a class="btn" href="DEX_HOMEPAGES/PROFILE_PAGES/Sellers_page.html">My Dashboard</a>
            <a class="btn secondary" href="DEX_HOMEPAGES/Dex-shop.html">View Shop</a>
          `;
          heroDescription.textContent =
            "100% free platform. No commission, no hidden fees. List unlimited products and connect directly with buyers on campus.";
        }

        // Re-trigger animations
        heroTitle.style.animation = "none";
        heroSubtitle.style.animation = "none";
        heroActions.style.animation = "none";
        setTimeout(() => {
          heroTitle.style.animation = "fadeInUp 0.8s ease-out";
          heroSubtitle.style.animation = "fadeInUp 0.8s ease-out 0.2s both";
          heroActions.style.animation = "fadeInUp 0.8s ease-out 0.4s both";
        }, 10);
      }

      /* =========================
      PRELOADER & INITIALIZATION
   ========================= */
      document.addEventListener("DOMContentLoaded", () => {
        loadHeaderLinks();
        setupSearch();
        updateHeroContent();
        loadProducts().then(() => renderProducts());

        if (!localStorage.getItem("safetyTipsSeen")) {
          setTimeout(() => {
            document.getElementById("safetyModal").style.display = "flex";
          }, 2000);
        }
      });

      window.addEventListener("load", () => {
        const preloader = document.getElementById("preloader");
        const pl1 = document.getElementById("pl1");
        const pl2 = document.getElementById("pl2");

        setTimeout(() => pl1?.classList.add("show"), 120);
        setTimeout(() => pl2?.classList.add("show"), 640);

        setTimeout(() => {
          preloader.classList.add("hide");
          preloader.style.transition = "opacity 0.6s ease";
          preloader.style.opacity = "0";
          setTimeout(() => preloader.remove(), 700);
        }, 1000);

        setTimeout(() => observeFadeIns(), 400);
        document.body.classList.remove("loading");
      });

      /* =========================
      MENU TOGGLE
   ========================= */
      const menuToggle = document.getElementById("menuToggle");
      const nav = document.querySelector("nav");

      menuToggle.addEventListener("click", () => {
        nav.classList.toggle("open");
        const isOpen = nav.classList.contains("open");
        menuToggle.setAttribute("aria-expanded", isOpen);
        menuToggle.innerHTML = isOpen
          ? '<i class="fas fa-times"></i>'
          : '<i class="fas fa-bars"></i>';
      });

      nav.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => {
          if (window.innerWidth <= 480) {
            nav.style.display = "none";
            menuToggle.setAttribute("aria-expanded", "false");
            menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
          }
        });
      });

      window.addEventListener("resize", () => {
        if (window.innerWidth > 480) nav.style.display = "flex";
        else nav.style.display = "none";
      });

      /* =========================
      LOGIN FORM (optional)
   ========================= */
      const loginForm = document.getElementById("customerLoginForm");
      loginForm?.addEventListener("submit", (e) => {
        e.preventDefault();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();
        const users = JSON.parse(localStorage.getItem("users")) || [];
        const user = users.find(
          (u) => u.email === email && u.password === password
        );
        if (user) {
          if (document.getElementById("remember")?.checked)
            localStorage.setItem("currentUser", JSON.stringify(user));
          else sessionStorage.setItem("currentUser", JSON.stringify(user));
          alert(`Welcome back, ${user.fullName || "User"}!`);
          loadHeaderLinks();
          setTimeout(() => (window.location.href = "Dex-home.html"), 150);
        } else {
          alert("Invalid email or password.");
          loginForm.reset();
        }
      });
    </script>
  </body>
</html>
