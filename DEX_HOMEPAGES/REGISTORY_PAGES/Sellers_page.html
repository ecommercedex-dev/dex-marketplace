<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dex&trade; Seller Dashboard</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Quicksand", sans-serif;
        line-height: 1.6;
        color: #fff;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        background: linear-gradient(rgba(50, 50, 0, 0.6), rgba(0, 0, 0, 0.7)),
          url("../Images/wallpaperflare.com_wallpaper (9).jpg") center/cover
            no-repeat;
      }
      .main-header {
        background: rgba(128, 128, 0, 0.2);
        backdrop-filter: blur(4px);
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 30px;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
      }
      h1#company-name a {
        font-family: "Fredoka One", cursive;
        font-size: 32px;
        color: #fff;
        text-decoration: none;
      }
      h1#company-name a:hover {
        text-shadow: 2px 2px 5px #c2c0c0;
      }
      nav {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      nav ul {
        list-style: none;
        display: flex;
        gap: 20px;
      }
      nav a {
        text-decoration: none;
        font-size: 15px;
        font-weight: 500;
        color: #fff;
        padding: 8px 14px;
        border-radius: 6px;
        transition: all 0.2s ease;
      }
      nav a:hover,
      nav a.active {
        background-color: #d4c247;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }
      .logout-btn {
        padding: 8px 14px;
        border: none;
        border-radius: 6px;
        background: #d4c247;
        color: #000;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .logout-btn:hover {
        background: #f5e371;
      }
      .container {
        display: flex;
        margin-top: 120px;
        flex: 1;
        padding: 20px;
        gap: 20px;
      }
      .sidebar {
        width: 220px;
        background: rgba(0, 0, 0, 0.4);
        padding: 20px;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .sidebar a {
        color: #fff;
        text-decoration: none;
        padding: 10px 14px;
        border-radius: 6px;
        transition: all 0.2s ease;
      }
      .sidebar a:hover,
      .sidebar a.active {
        background: #d4c247;
        color: #000;
        font-weight: bold;
      }
      .content {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .section {
        display: none;
        background: rgba(0, 0, 0, 0.4);
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }
      .section.active {
        display: block;
      }
      h2 {
        color: #d4c247;
        margin-bottom: 12px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }
      th,
      td {
        padding: 10px;
        border: 1px solid #ddd;
        color: #fff;
        text-align: center;
      }
      th {
        background: rgba(212, 194, 71, 0.3);
      }
      .product-images {
        display: flex;
        gap: 6px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .product-images img {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 6px;
        border: 1px solid #fff;
      }
      input,
      textarea {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
        margin-bottom: 10px;
        background: rgba(0, 0, 0, 0.3);
        color: #fff;
      }
      input::placeholder,
      textarea::placeholder {
        color: #ddd;
      }
      button {
        padding: 10px 16px;
        border: none;
        border-radius: 6px;
        background: #d4c247;
        color: #000;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      button:hover {
        background: #f5e371;
      }
      .badge {
        display: inline-block;
        background: #d4c247;
        color: #000;
        padding: 4px 10px;
        border-radius: 12px;
        margin-right: 6px;
        font-size: 0.9rem;
        font-weight: bold;
      }
      .card {
        background: rgba(212, 194, 71, 0.1);
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 10px;
      }
      footer {
        background: rgba(128, 128, 0, 0.2);
        backdrop-filter: blur(6px);
        text-align: center;
        font-size: 0.95rem;
        padding: 18px 0;
        color: #fff;
      }
      footer a {
        color: #f5e371;
        text-decoration: none;
        margin: 0 8px;
      }
      footer a:hover {
        text-decoration: underline;
      }
      @media (max-width: 768px) {
        .container {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: space-around;
        }
        .sidebar a {
          flex: 1 1 45%;
          text-align: center;
          margin-bottom: 8px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="main-header">
        <h1 id="company-name">
          <a href="../../Dex-home.html">Dex™</a>
        </h1>
        <nav>
          <ul>
            <li><a href="../../Dex-home.html">Home</a></li>
          </ul>
          <button class="logout-btn" id="logoutBtn">Logout</button>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="sidebar">
        <a href="#" class="tab-link active" data-tab="profile"
          ><i class="fas fa-user"></i> Profile</a
        >
        <a href="#" class="tab-link" data-tab="products"
          ><i class="fas fa-box"></i> Products</a
        >
        <a href="#" class="tab-link" data-tab="orders"
          ><i class="fas fa-shopping-cart"></i> Orders</a
        >
        <a href="#" class="tab-link" data-tab="earnings"
          ><i class="fas fa-dollar-sign"></i> Earnings</a
        >
        <a href="#" class="tab-link" data-tab="analytics"
          ><i class="fas fa-chart-line"></i> Quick Stats</a
        >
        <a href="#" class="tab-link" data-tab="messaging"
          ><i class="fas fa-envelope"></i> Messaging</a
        >
        <a href="#" class="tab-link" data-tab="reporting"
          ><i class="fas fa-file-alt"></i> Reports</a
        >
        <a href="#" class="tab-link" data-tab="delivery"
          ><i class="fas fa-truck"></i> Delivery</a
        >
        <a href="#" class="tab-link" data-tab="integration"
          ><i class="fas fa-plug"></i> Integration</a
        >
        <a href="#" class="tab-link" data-tab="marketing"
          ><i class="fas fa-bullhorn"></i> Marketing</a
        >
        <a href="#" class="tab-link" data-tab="customers"
          ><i class="fas fa-users"></i> Customers</a
        >
        <a href="#" class="tab-link" data-tab="settings"
          ><i class="fas fa-cog"></i> Settings</a
        >
      </div>

      <div class="content">
        <div id="profile" class="section active">
          <h2>Store Profile</h2>
          <div
            style="
              display: flex;
              align-items: center;
              gap: 20px;
              margin-bottom: 15px;
            "
          >
            <div>
              <img
                id="profile-pic"
                src="../images/default-profile.png"
                alt="Profile Picture"
                style="
                  width: 100px;
                  height: 100px;
                  border-radius: 50%;
                  border: 2px solid #d4c247;
                  object-fit: cover;
                "
              />
              <input
                type="file"
                accept="image/*"
                id="profile-upload"
                style="display: block; margin-top: 10px"
              />
              <p style="font-size: 12px; color: #ddd">Change Profile Picture</p>
            </div>
            <div>
              <p><strong>Store Name:</strong> Dex Store</p>
              <p><strong>Email:</strong> seller@dex.com</p>
              <p><strong>Phone:</strong> +233 123 456 789</p>
              <p><strong>Status:</strong> Verified</p>
            </div>
          </div>
        </div>

        <div id="products" class="section">
          <h2>Products</h2>
          <button onclick="addProduct()">Add New Product</button>
          <div id="product-list"></div>
        </div>

        <div id="orders" class="section">
          <h2>Orders</h2>
          <table>
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Buyer</th>
                <th>Status</th>
                <th>Total</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>#001</td>
                <td>John Doe</td>
                <td>Pending</td>
                <td>₵50</td>
                <td>
                  <button onclick="completeOrder(this)">
                    Mark as Completed
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div id="earnings" class="section">
          <h2>Earnings</h2>
          <div id="earning-cards">
            <div class="card"><strong>Total Sales:</strong> ₵500</div>
            <div class="card"><strong>Pending Payout:</strong> ₵50</div>
            <div class="card"><strong>Commission Deducted:</strong> ₵50</div>
          </div>
          <button>Request Withdrawal</button>
        </div>

        <div id="analytics" class="section">
          <h2>Quick Stats</h2>
          <div class="card">
            <span class="badge">Top Seller</span>Example Product 1
          </div>
          <div class="card">
            <span class="badge">100 Sales Milestone</span>Congrats! You hit 100
            sales.
          </div>
          <div class="card" id="instant-sale"></div>
        </div>

        <div id="messaging" class="section">
          <h2>Messaging</h2>
          <p>Send and receive messages from customers here.</p>
        </div>

        <div id="reporting" class="section">
          <h2>Reports</h2>
          <p>View sales, stock, and financial reports.</p>
        </div>

        <div id="delivery" class="section">
          <h2>Delivery</h2>
          <p>Manage deliveries and shipment statuses.</p>
        </div>

        <div id="integration" class="section">
          <h2>Integration</h2>
          <p>Connect your store to social media and other platforms.</p>
        </div>

        <div id="marketing" class="section">
          <h2>Marketing</h2>
          <p>Set up promotions, ads, and campaigns to boost sales.</p>
        </div>

        <div id="customers" class="section">
          <h2>Customers</h2>
          <p>View your customer base and feedback.</p>
        </div>

        <div id="settings" class="section">
          <h2>Settings</h2>
          <input type="text" placeholder="Store Name" />
          <input type="email" placeholder="Email" />
          <input type="password" placeholder="New Password" />
          <input type="text" placeholder="Store Banner URL" />
          <button>Save Changes</button>
        </div>
      </div>
    </main>

    <footer>
      <p>&copy; 2025 Dex™. All rights reserved.</p>
      <p>
        <a href="../../DEX_INFO/Dex-about.html">About</a> |
        <a href="../../DEX_CONTACT/Dex-contact.html">Contact</a>
      </p>
    </footer>

    <script>
      const links = document.querySelectorAll(".tab-link");
      const sections = document.querySelectorAll(".section");
      links.forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          links.forEach((l) => l.classList.remove("active"));
          sections.forEach((s) => s.classList.remove("active"));
          link.classList.add("active");
          document.getElementById(link.dataset.tab).classList.add("active");
        });
      });

      const productList = document.getElementById("product-list");
      function addProduct() {
        const productDiv = document.createElement("div");
        productDiv.style.background = "rgba(212,194,71,0.1)";
        productDiv.style.padding = "10px";
        productDiv.style.borderRadius = "6px";
        productDiv.style.marginBottom = "12px";
        productDiv.innerHTML = `
          <input type="text" placeholder="Product Title">
          <input type="number" placeholder="Price (₵)">
          <input type="number" placeholder="Stock">
          <input type="text" placeholder="Category">
          <input type="file" multiple accept="image/*" onchange="previewImages(event, this)">
          <div class="product-images"></div>
          <button onclick="this.parentElement.remove()">Remove Product</button>
        `;
        productList.appendChild(productDiv);
      }

      function previewImages(e, input) {
        const container = input.nextElementSibling;
        container.innerHTML = "";
        Array.from(input.files).forEach((file) => {
          const img = document.createElement("img");
          img.src = URL.createObjectURL(file);
          container.appendChild(img);
        });
      }

      const profileUpload = document.getElementById("profile-upload");
      const profilePic = document.getElementById("profile-pic");
      profileUpload.addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (file) profilePic.src = URL.createObjectURL(file);
      });

      function completeOrder(btn) {
        const row = btn.parentElement.parentElement;
        row.cells[2].innerText = "Completed";
        const saleAmount = parseFloat(row.cells[3].innerText.replace("₵", ""));
        const instant = document.getElementById("instant-sale");
        instant.innerHTML = `<strong>Just Sold:</strong> ₵${saleAmount} earned — ₵${(
          saleAmount * 0.05
        ).toFixed(2)} commission!`;
      }

      window.addEventListener("DOMContentLoaded", () => {
        // Check both localStorage and sessionStorage
        const currentUser =
          JSON.parse(localStorage.getItem("currentUser")) ||
          JSON.parse(sessionStorage.getItem("currentUser"));

        // If no user is logged in, send to sign-in page
        if (!currentUser) {
          window.location.href = "seller_sign_in.html";
          return;
        }

        // Redirect based on role
        if (
          currentUser.role === "buyer" &&
          !window.location.href.includes("Buyer_profile.html")
        ) {
          window.location.href = "Buyer_profile.html";
          return;
        }
        if (
          currentUser.role === "seller" &&
          !window.location.href.includes("Sellers_page.html")
        ) {
          window.location.href = "Sellers_page.html";
          return;
        }

        // Setup logout button
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", () => {
            localStorage.removeItem("currentUser");
            sessionStorage.removeItem("currentUser");
            window.location.href = "seller_sign_in.html";
          });
        }
      });
    </script>
  </body>
</html>
